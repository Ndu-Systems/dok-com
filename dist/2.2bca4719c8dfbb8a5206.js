(window.webpackJsonp=window.webpackJsonp||[]).push([[2],{"T7+c":function(module,exports){function dtmlXMLLoaderObject(e,t,n,i){return this.xmlDoc="",this.async=void 0===n||n,this.onloadAction=e||null,this.mainObject=t||null,this.waitCall=null,this.rSeed=i||!1,this}function convertStringToBoolean(e){switch("string"==typeof e&&(e=e.toLowerCase()),e){case"1":case"true":case"yes":case"y":case 1:case!0:return!0;default:return!1}}function getUrlSymbol(e){return-1!=e.indexOf("?")?"&":"?"}function dhtmlDragAndDropObject(){return window.dhtmlDragAndDrop?window.dhtmlDragAndDrop:(this.lastLanding=0,this.dragNode=0,this.dragStartNode=0,this.dragStartObject=0,this.tempDOMU=null,this.tempDOMM=null,this.waitDrag=0,window.dhtmlDragAndDrop=this,this)}function _dhtmlxError(e,t,n){return this.catches||(this.catches=[]),this}function dhtmlXHeir(e,t){for(var n in t)"function"==typeof t[n]&&(e[n]=t[n]);return e}window.dhtmlXScheduler=window.scheduler={version:"5.0.0"},window.dhtmlx||(dhtmlx=function(e){for(var t in e)dhtmlx[t]=e[t];return dhtmlx}),dhtmlx.extend_api=function(e,t,n){var i=window[e];i&&(window[e]=function(e){var n;if(e&&"object"==typeof e&&!e.tagName){for(var l in n=i.apply(this,t._init?t._init(e):arguments),dhtmlx)t[l]&&this[t[l]](dhtmlx[l]);for(var l in e)t[l]?this[t[l]](e[l]):0===l.indexOf("on")&&this.attachEvent(l,e[l])}else n=i.apply(this,arguments);return t._patch&&t._patch(this),n||this},window[e].prototype=i.prototype,n&&dhtmlXHeir(window[e].prototype,n))},dhtmlxAjax={get:function(e,t){var n=new dtmlXMLLoaderObject(!0);return n.async=arguments.length<3,n.waitCall=t,n.loadXML(e),n},post:function(e,t,n){var i=new dtmlXMLLoaderObject(!0);return i.async=arguments.length<4,i.waitCall=n,i.loadXML(e,!0,t),i},getSync:function(e){return this.get(e,null,!0)},postSync:function(e,t){return this.post(e,t,null,!0)}},window.dtmlXMLLoaderObject=dtmlXMLLoaderObject,dtmlXMLLoaderObject.count=0,dtmlXMLLoaderObject.prototype.waitLoadFunction=function(e){var t=!0;return this.check=function(){if(e&&e.onloadAction&&(!e.xmlDoc.readyState||4==e.xmlDoc.readyState)){if(!t)return;t=!1,dtmlXMLLoaderObject.count++,"function"==typeof e.onloadAction&&e.onloadAction(e.mainObject,null,null,null,e),e.waitCall&&(e.waitCall.call(this,e),e.waitCall=null)}},this.check},dtmlXMLLoaderObject.prototype.getXMLTopNode=function(e,t){var n;if(this.xmlDoc.responseXML){if(0===(i=this.xmlDoc.responseXML.getElementsByTagName(e)).length&&-1!=e.indexOf(":"))var i=this.xmlDoc.responseXML.getElementsByTagName(e.split(":")[1]);n=i[0]}else n=this.xmlDoc.documentElement;return n?(this._retry=!1,n):!this._retry&&_isIE?(this._retry=!0,t=this.xmlDoc,this.loadXMLString(this.xmlDoc.responseText.replace(/^[\s]+/,""),!0),this.getXMLTopNode(e,t)):(dhtmlxError.throwError("LoadXML","Incorrect XML",[t||this.xmlDoc,this.mainObject]),document.createElement("div"))},dtmlXMLLoaderObject.prototype.loadXMLString=function(e,t){if(_isIE)this.xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),this.xmlDoc.async=this.async,this.xmlDoc.onreadystatechange=function(){},this.xmlDoc.loadXML(e);else{var n=new DOMParser;this.xmlDoc=n.parseFromString(e,"text/xml")}t||(this.onloadAction&&this.onloadAction(this.mainObject,null,null,null,this),this.waitCall&&(this.waitCall(),this.waitCall=null))},dtmlXMLLoaderObject.prototype.loadXML=function(e,t,n,i){this.rSeed&&(e+=(-1!=e.indexOf("?")?"&":"?")+"a_dhx_rSeed="+(new Date).valueOf()),this.filePath=e,this.xmlDoc=!_isIE&&window.XMLHttpRequest?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),this.async&&(this.xmlDoc.onreadystatechange=new this.waitLoadFunction(this)),this.xmlDoc.open("string"==typeof t?t:t?"POST":"GET",e,this.async),i?(this.xmlDoc.setRequestHeader("User-Agent","dhtmlxRPC v0.1 ("+navigator.userAgent+")"),this.xmlDoc.setRequestHeader("Content-type","text/xml")):t&&this.xmlDoc.setRequestHeader("Content-type","application/x-www-form-urlencoded"),this.xmlDoc.setRequestHeader("X-Requested-With","XMLHttpRequest"),this.xmlDoc.send(n),this.async||new this.waitLoadFunction(this)()},dtmlXMLLoaderObject.prototype.destructor=function(){return this._filterXPath=null,this._getAllNamedChilds=null,this._retry=null,this.async=null,this.rSeed=null,this.filePath=null,this.onloadAction=null,this.mainObject=null,this.xmlDoc=null,this.doXPath=null,this.doXPathOpera=null,this.doXSLTransToObject=null,this.doXSLTransToString=null,this.loadXML=null,this.loadXMLString=null,this.doSerialization=null,this.xmlNodeToJSON=null,this.getXMLTopNode=null,this.setXSLParamValue=null,null},dtmlXMLLoaderObject.prototype.xmlNodeToJSON=function(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].name]=e.attributes[n].value;for(t._tagvalue=e.firstChild?e.firstChild.nodeValue:"",n=0;n<e.childNodes.length;n++){var i=e.childNodes[n].tagName;i&&(t[i]||(t[i]=[]),t[i].push(this.xmlNodeToJSON(e.childNodes[n])))}return t},window.dhtmlDragAndDropObject=dhtmlDragAndDropObject,dhtmlDragAndDropObject.prototype.removeDraggableItem=function(e){e.onmousedown=null,e.dragStarter=null,e.dragLanding=null},dhtmlDragAndDropObject.prototype.addDraggableItem=function(e,t){e.onmousedown=this.preCreateDragCopy,e.dragStarter=t,this.addDragLanding(e,t)},dhtmlDragAndDropObject.prototype.addDragLanding=function(e,t){e.dragLanding=t},dhtmlDragAndDropObject.prototype.preCreateDragCopy=function(e){return!e&&!window.event||2!=(e||event).button?window.dhtmlDragAndDrop.waitDrag?(window.dhtmlDragAndDrop.waitDrag=0,document.body.onmouseup=window.dhtmlDragAndDrop.tempDOMU,document.body.onmousemove=window.dhtmlDragAndDrop.tempDOMM,!1):(window.dhtmlDragAndDrop.dragNode&&window.dhtmlDragAndDrop.stopDrag(e),window.dhtmlDragAndDrop.waitDrag=1,window.dhtmlDragAndDrop.tempDOMU=document.body.onmouseup,window.dhtmlDragAndDrop.tempDOMM=document.body.onmousemove,window.dhtmlDragAndDrop.dragStartNode=this,window.dhtmlDragAndDrop.dragStartObject=this.dragStarter,document.body.onmouseup=window.dhtmlDragAndDrop.preCreateDragCopy,document.body.onmousemove=window.dhtmlDragAndDrop.callDrag,window.dhtmlDragAndDrop.downtime=(new Date).valueOf(),!(!e||!e.preventDefault||(e.preventDefault(),1))):void 0},dhtmlDragAndDropObject.prototype.callDrag=function(e){e||(e=window.event);var t=window.dhtmlDragAndDrop;if(!((new Date).valueOf()-t.downtime<100)){if(!t.dragNode){if(!t.waitDrag)return t.stopDrag(e,!0);if(t.dragNode=t.dragStartObject._createDragNode(t.dragStartNode,e),!t.dragNode)return t.stopDrag();t.dragNode.onselectstart=function(){return!1},t.gldragNode=t.dragNode,document.body.appendChild(t.dragNode),document.body.onmouseup=t.stopDrag,t.waitDrag=0,t.dragNode.pWindow=window,t.initFrameRoute()}if(t.dragNode.parentNode!=window.document.body&&t.gldragNode){var n=t.gldragNode;t.gldragNode.old&&(n=t.gldragNode.old),n.parentNode.removeChild(n);var i=t.dragNode.pWindow;if(n.pWindow&&n.pWindow.dhtmlDragAndDrop.lastLanding&&n.pWindow.dhtmlDragAndDrop.lastLanding.dragLanding._dragOut(n.pWindow.dhtmlDragAndDrop.lastLanding),_isIE){var l=document.createElement("div");l.innerHTML=t.dragNode.outerHTML,t.dragNode=l.childNodes[0]}else t.dragNode=t.dragNode.cloneNode(!0);t.dragNode.pWindow=window,t.gldragNode.old=t.dragNode,document.body.appendChild(t.dragNode),i.dhtmlDragAndDrop.dragNode=t.dragNode}t.dragNode.style.left=e.clientX+15+(t.fx?-1*t.fx:0)+(document.body.scrollLeft||document.documentElement.scrollLeft)+"px",t.dragNode.style.top=e.clientY+3+(t.fy?-1*t.fy:0)+(document.body.scrollTop||document.documentElement.scrollTop)+"px",t.checkLanding(e.srcElement?e.srcElement:e.target,e)}},dhtmlDragAndDropObject.prototype.calculateFramePosition=function(e){if(window.name){for(var t=parent.frames[window.name].frameElement.offsetParent,n=0,i=0;t;)n+=t.offsetLeft,i+=t.offsetTop,t=t.offsetParent;if(parent.dhtmlDragAndDrop){var l=parent.dhtmlDragAndDrop.calculateFramePosition(1);n+=1*l.split("_")[0],i+=1*l.split("_")[1]}if(e)return n+"_"+i;this.fx=n,this.fy=i}return"0_0"},dhtmlDragAndDropObject.prototype.checkLanding=function(e,t){e&&e.dragLanding?(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding),this.lastLanding=e,this.lastLanding=this.lastLanding.dragLanding._dragIn(this.lastLanding,this.dragStartNode,t.clientX,t.clientY,t),this.lastLanding_scr=_isIE?t.srcElement:t.target):e&&"BODY"!=e.tagName?this.checkLanding(e.parentNode,t):(this.lastLanding&&this.lastLanding.dragLanding._dragOut(this.lastLanding,t.clientX,t.clientY,t),this.lastLanding=0,this._onNotFound&&this._onNotFound())},dhtmlDragAndDropObject.prototype.stopDrag=function(e,t){var n=window.dhtmlDragAndDrop;if(!t){n.stopFrameRoute();var i=n.lastLanding;n.lastLanding=null,i&&i.dragLanding._drag(n.dragStartNode,n.dragStartObject,i,_isIE?event.srcElement:e.target)}n.lastLanding=null,n.dragNode&&n.dragNode.parentNode==document.body&&n.dragNode.parentNode.removeChild(n.dragNode),n.dragNode=0,n.gldragNode=0,n.fx=0,n.fy=0,n.dragStartNode=0,n.dragStartObject=0,document.body.onmouseup=n.tempDOMU,document.body.onmousemove=n.tempDOMM,n.tempDOMU=null,n.tempDOMM=null,n.waitDrag=0},dhtmlDragAndDropObject.prototype.stopFrameRoute=function(e){e&&window.dhtmlDragAndDrop.stopDrag(1,1);for(var t=0;t<window.frames.length;t++)try{window.frames[t]!=e&&window.frames[t].dhtmlDragAndDrop&&window.frames[t].dhtmlDragAndDrop.stopFrameRoute(window)}catch(e){}try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=e&&parent.dhtmlDragAndDrop.stopFrameRoute(window)}catch(e){}},dhtmlDragAndDropObject.prototype.initFrameRoute=function(e,t){e&&(window.dhtmlDragAndDrop.preCreateDragCopy(),window.dhtmlDragAndDrop.dragStartNode=e.dhtmlDragAndDrop.dragStartNode,window.dhtmlDragAndDrop.dragStartObject=e.dhtmlDragAndDrop.dragStartObject,window.dhtmlDragAndDrop.dragNode=e.dhtmlDragAndDrop.dragNode,window.dhtmlDragAndDrop.gldragNode=e.dhtmlDragAndDrop.dragNode,window.document.body.onmouseup=window.dhtmlDragAndDrop.stopDrag,window.waitDrag=0,!_isIE&&t&&(!_isFF||_FFrv<1.8)&&window.dhtmlDragAndDrop.calculateFramePosition());try{parent.dhtmlDragAndDrop&&parent!=window&&parent!=e&&parent.dhtmlDragAndDrop.initFrameRoute(window)}catch(e){}for(var n=0;n<window.frames.length;n++)try{window.frames[n]!=e&&window.frames[n].dhtmlDragAndDrop&&window.frames[n].dhtmlDragAndDrop.initFrameRoute(window,!e||t?1:0)}catch(e){}},_isFF=!1,_isIE=!1,_isOpera=!1,_isKHTML=!1,_isMacOS=!1,_isChrome=!1,_FFrv=!1,_KHTMLrv=!1,_OperaRv=!1,-1!=navigator.userAgent.indexOf("Macintosh")&&(_isMacOS=!0),navigator.userAgent.toLowerCase().indexOf("chrome")>-1&&(_isChrome=!0),-1!=navigator.userAgent.indexOf("Safari")||-1!=navigator.userAgent.indexOf("Konqueror")?(_KHTMLrv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Safari")+7,5)),_KHTMLrv>525?(_isFF=!0,_FFrv=1.9):_isKHTML=!0):-1!=navigator.userAgent.indexOf("Opera")?(_isOpera=!0,_OperaRv=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("Opera")+6,3))):-1!=navigator.appName.indexOf("Microsoft")?(_isIE=!0,-1==navigator.appVersion.indexOf("MSIE 8.0")&&-1==navigator.appVersion.indexOf("MSIE 9.0")&&-1==navigator.appVersion.indexOf("MSIE 10.0")||"BackCompat"==document.compatMode||(_isIE=8)):"Netscape"==navigator.appName&&-1!=navigator.userAgent.indexOf("Trident")?_isIE=8:(_isFF=!0,_FFrv=parseFloat(navigator.userAgent.split("rv:")[1])),dtmlXMLLoaderObject.prototype.doXPath=function(e,t,n,i){if(_isKHTML||!_isIE&&!window.XPathResult)return this.doXPathOpera(e,t);if(_isIE)return t||(t=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),t||dhtmlxError.throwError("LoadXML","Incorrect XML",[t||this.xmlDoc,this.mainObject]),n&&t.setProperty("SelectionNamespaces","xmlns:xsl='"+n+"'"),"single"==i?t.selectSingleNode(e):t.selectNodes(e)||new Array(0);var l=t;t||(t=this.xmlDoc.nodeName?this.xmlDoc:this.xmlDoc.responseXML),t||dhtmlxError.throwError("LoadXML","Incorrect XML",[t||this.xmlDoc,this.mainObject]),-1!=t.nodeName.indexOf("document")?l=t:(l=t,t=t.ownerDocument);var s=XPathResult.ANY_TYPE;"single"==i&&(s=XPathResult.FIRST_ORDERED_NODE_TYPE);var r=[],a=t.evaluate(e,l,function(e){return n},s,null);if(s==XPathResult.FIRST_ORDERED_NODE_TYPE)return a.singleNodeValue;for(var d=a.iterateNext();d;)r[r.length]=d,d=a.iterateNext();return r},_dhtmlxError.prototype.catchError=function(e,t){this.catches[e]=t},_dhtmlxError.prototype.throwError=function(e,t,n){return this.catches[e]?this.catches[e](e,t,n):this.catches.ALL?this.catches.ALL(e,t,n):(window.alert("Error type: "+arguments[0]+"\nDescription: "+arguments[1]),null)},window.dhtmlxError=new _dhtmlxError,dtmlXMLLoaderObject.prototype.doXPathOpera=function(e,t){var n=e.replace(/[\/]+/gi,"/").split("/"),i=null,l=1;if(!n.length)return[];if("."==n[0])i=[t];else{if(""!==n[0])return[];i=(this.xmlDoc.responseXML||this.xmlDoc).getElementsByTagName(n[l].replace(/\[[^\]]*\]/g,"")),l++}for(;l<n.length;l++)i=this._getAllNamedChilds(i,n[l]);return-1!=n[l-1].indexOf("[")&&(i=this._filterXPath(i,n[l-1])),i},dtmlXMLLoaderObject.prototype._filterXPath=function(e,t){for(var n=[],i=(t=t.replace(/[^\[]*\[\@/g,"").replace(/[\[\]\@]*/g,""),0);i<e.length;i++)e[i].getAttribute(t)&&(n[n.length]=e[i]);return n},dtmlXMLLoaderObject.prototype._getAllNamedChilds=function(e,t){var n=[];_isKHTML&&(t=t.toUpperCase());for(var i=0;i<e.length;i++)for(var l=0;l<e[i].childNodes.length;l++)_isKHTML?e[i].childNodes[l].tagName&&e[i].childNodes[l].tagName.toUpperCase()==t&&(n[n.length]=e[i].childNodes[l]):e[i].childNodes[l].tagName==t&&(n[n.length]=e[i].childNodes[l]);return n},void 0===window.dhtmlxEvent&&(window.dhtmlxEvent=function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}),dtmlXMLLoaderObject.prototype.xslDoc=null,dtmlXMLLoaderObject.prototype.setXSLParamValue=function(e,t,n){n||(n=this.xslDoc),n.responseXML&&(n=n.responseXML);var i=this.doXPath("/xsl:stylesheet/xsl:variable[@name='"+e+"']",n,"http://www.w3.org/1999/XSL/Transform","single");i&&(i.firstChild.nodeValue=t)},dtmlXMLLoaderObject.prototype.doXSLTransToObject=function(e,t){var n;if(e||(e=this.xslDoc),e.responseXML&&(e=e.responseXML),t||(t=this.xmlDoc),t.responseXML&&(t=t.responseXML),_isIE){n=new ActiveXObject("Msxml2.DOMDocument.3.0");try{t.transformNodeToObject(e,n)}catch(i){n=t.transformNode(e)}}else this.XSLProcessor||(this.XSLProcessor=new XSLTProcessor,this.XSLProcessor.importStylesheet(e)),n=this.XSLProcessor.transformToDocument(t);return n},dtmlXMLLoaderObject.prototype.doXSLTransToString=function(e,t){var n=this.doXSLTransToObject(e,t);return"string"==typeof n?n:this.doSerialization(n)},dtmlXMLLoaderObject.prototype.doSerialization=function(e){return e||(e=this.xmlDoc),e.responseXML&&(e=e.responseXML),_isIE?e.xml:(new XMLSerializer).serializeToString(e)},dhtmlxEventable=function(obj){obj.attachEvent=function(e,t,n){return this[e="ev_"+e.toLowerCase()]||(this[e]=new this.eventCatcher(n||this)),e+":"+this[e].addEvent(t)},obj.callEvent=function(e,t){return!this[e="ev_"+e.toLowerCase()]||this[e].apply(this,t)},obj.checkEvent=function(e){return!!this["ev_"+e.toLowerCase()]},obj.eventCatcher=function(obj){var dhx_catch=[],z=function(){for(var e=!0,t=0;t<dhx_catch.length;t++)if(dhx_catch[t]){var n=dhx_catch[t].apply(obj,arguments);e=e&&n}return e};return z.addEvent=function(ev){return"function"!=typeof ev&&(ev=eval(ev)),!!ev&&dhx_catch.push(ev)-1},z.removeEvent=function(e){dhx_catch[e]=null},z},obj.detachEvent=function(e){if(e){var t=e.split(":");this[t[0]].removeEvent(t[1])}},obj.detachAllEvents=function(){for(var e in this)0===e.indexOf("ev_")&&(this.detachEvent(e),this[e]=null)},obj=null},scheduler.event=window.dhtmlxEvent,scheduler.eventRemove=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},function(){function e(e){var t=!1,n=!1;if(window.getComputedStyle){var i=window.getComputedStyle(e,null);t=i.display,n=i.visibility}else e.currentStyle&&(t=e.currentStyle.display,n=e.currentStyle.visibility);var l=!1,s=scheduler._locate_css({target:e},"dhx_form_repeat",!1);return s&&(l=!("0px"!=s.style.height)),l=l||!e.offsetHeight,"none"!=t&&"hidden"!=n&&!l}function t(e){return!isNaN(e.getAttribute("tabindex"))&&1*e.getAttribute("tabindex")>=0}function n(e){return!{a:!0,area:!0}[e.nodeName.loLowerCase()]||!!e.getAttribute("href")}function i(e){return!{input:!0,select:!0,textarea:!0,button:!0,object:!0}[e.nodeName.toLowerCase()]||!e.hasAttribute("disabled")}scheduler._getFocusableNodes=function(l){for(var s=l.querySelectorAll(["a[href]","area[href]","input","select","textarea","button","iframe","object","embed","[tabindex]","[contenteditable]"].join(", ")),r=Array.prototype.slice.call(s,0),a=0;a<r.length;a++){var d=r[a];(t(d)||i(d)||n(d))&&e(d)||(r.splice(a,1),a--)}return r}}(),scheduler._trim=function(e){return(String.prototype.trim||function(){return this.replace(/^\s+|\s+$/g,"")}).apply(e)},scheduler._isDate=function(e){return!(!e||"object"!=typeof e||!(e.getFullYear&&e.getMonth&&e.getDate))},scheduler._isObject=function(e){return e&&"object"==typeof e},window.dhtmlx||(window.dhtmlx={}),function(){function e(e,t){setTimeout(function(){if(e.box){var i=e.callback;n(!1),e.box.parentNode.removeChild(e.box),dhtmlx.callEvent("onAfterMessagePopup",[e.box]),h=e.box=null,i&&i(t)}},1)}function t(t){if(h){var n=(t=t||event).which||event.keyCode,i=!1;if(dhtmlx.message.keyboard){if(13==n||32==n){var l=t.target||t.srcElement;scheduler._getClassName(l).indexOf("dhtmlx_popup_button")>-1&&l.click?l.click():(e(h,!0),i=!0)}27==n&&(e(h,!1),i=!0)}if(i)return t.preventDefault&&t.preventDefault(),!(t.cancelBubble=!0)}}function n(e){n.cover||((n.cover=document.createElement("div")).onkeydown=t,n.cover.className="dhx_modal_cover",document.body.appendChild(n.cover)),document,n.cover.style.display=e?"inline-block":"none"}function i(e,t,n){return"<div "+scheduler._waiAria.messageButtonAttrString(e)+"class='dhtmlx_popup_button dhtmlx_"+(n||e||"").toLowerCase().replace(/ /g,"_")+"_button' result='"+t+"' ><div>"+e+"</div></div>"}function l(t,n,l){var s=document.createElement("div");s.className=" dhtmlx_modal_box dhtmlx-"+t.type,s.setAttribute("dhxbox",1);var r=scheduler.uid();scheduler._waiAria.messageModalAttr(s,r);var a="",d=!1;if(t.width&&(s.style.width=t.width),t.height&&(s.style.height=t.height),t.title&&(a+='<div class="dhtmlx_popup_title" id="'+r+'">'+t.title+"</div>",d=!0),a+='<div class="dhtmlx_popup_text" '+(d?"":' id="'+r+'" ')+"><span>"+(t.content?"":t.text)+'</span></div><div  class="dhtmlx_popup_controls">',n){var o=t.ok||scheduler.locale.labels.message_ok;void 0===o&&(o="OK"),a+=i(o,!0,"ok")}if(l){var _=t.cancel||scheduler.locale.labels.message_cancel;void 0===_&&(_="Cancel"),a+=i(_,!1,"cancel")}if(t.buttons)for(var c=0;c<t.buttons.length;c++)a+=i(t.buttons[c],c);if(s.innerHTML=a+="</div>",t.content){var u=t.content;"string"==typeof u&&(u=document.getElementById(u)),"none"==u.style.display&&(u.style.display=""),s.childNodes[t.title?1:0].appendChild(u)}return s.onclick=function(n){var i=(n=n||event).target||n.srcElement,l=scheduler._getClassName(i);if(l||(i=i.parentNode),"dhtmlx_popup_button"==(l=scheduler._getClassName(i)).split(" ")[0]){var s=i.getAttribute("result");e(t,s="true"==s||"false"!=s&&s)}},t.box=s,h=t,s}function s(e,i,s){var r=e.tagName?e:l(e,i,s);e.hidden||n(!0),document.body.appendChild(r);var a=Math.abs(Math.floor(((window.innerWidth||document.documentElement.offsetWidth)-r.offsetWidth)/2)),d=Math.abs(Math.floor(((window.innerHeight||document.documentElement.offsetHeight)-r.offsetHeight)/2));return r.style.top="top"==e.position?"-3px":d+"px",r.style.left=a+"px",r.onkeydown=t,dhtmlx.modalbox.focus(r),e.hidden&&dhtmlx.modalbox.hide(r),dhtmlx.callEvent("onMessagePopup",[r]),r}function r(e){return s(e,!0,!1)}function a(e){return s(e,!0,!0)}function d(e){return s(e)}function o(e,t,n){return"object"!=typeof e&&("function"==typeof t&&(n=t,t=""),e={text:e,type:t,callback:n}),e}var h=null;document.attachEvent?document.attachEvent("onkeydown",t):document.addEventListener("keydown",t,!0),dhtmlx.alert=function(){var e=o.apply(this,arguments);return e.type=e.type||"confirm",r(e)},dhtmlx.confirm=function(){var e=o.apply(this,arguments);return e.type=e.type||"alert",a(e)},dhtmlx.modalbox=function(){var e=o.apply(this,arguments);return e.type=e.type||"alert",d(e)},dhtmlx.modalbox.hide=function(e){for(;e&&e.getAttribute&&!e.getAttribute("dhxbox");)e=e.parentNode;e&&(e.parentNode.removeChild(e),n(!1))},dhtmlx.modalbox.focus=function(e){setTimeout(function(){var t=scheduler._getFocusableNodes(e);t.length&&t[0].focus&&t[0].focus()},1)};var _=dhtmlx.message=function(e,t,n,i){switch((e=(function(e,t,n,i){return"object"!=typeof e&&(e={text:e,type:t,expire:n,id:i}),e.id=e.id||_.uid(),e.expire=e.expire||_.expire,e}).apply(this,arguments)).type=e.type||"info",e.type.split("-")[0]){case"alert":return r(e);case"confirm":return a(e);case"modalbox":return d(e);default:return function(e){_.area||(_.area=document.createElement("div"),_.area.className="dhtmlx_message_area",_.area.style[_.position]="5px",document.body.appendChild(_.area)),_.hide(e.id);var t=document.createElement("div");return t.innerHTML="<div>"+e.text+"</div>",t.className="dhtmlx-info dhtmlx-"+e.type,t.onclick=function(){_.hide(e.id),e=null},scheduler._waiAria.messageInfoAttr(t),"bottom"==_.position&&_.area.firstChild?_.area.insertBefore(t,_.area.firstChild):_.area.appendChild(t),e.expire>0&&(_.timers[e.id]=window.setTimeout(function(){_.hide(e.id)},e.expire)),_.pull[e.id]=t,t=null,e.id}(e)}};_.seed=(new Date).valueOf(),_.uid=function(){return _.seed++},_.expire=4e3,_.keyboard=!0,_.position="top",_.pull={},_.timers={},_.hideAll=function(){for(var e in _.pull)_.hide(e)},_.hide=function(e){var t=_.pull[e];t&&t.parentNode&&(window.setTimeout(function(){t.parentNode.removeChild(t),t=null},2e3),t.className+=" hidden",_.timers[e]&&window.clearTimeout(_.timers[e]),delete _.pull[e])}}(),dhtmlx.attachEvent||dhtmlxEventable(dhtmlx);var dataProcessor=window.dataProcessor=function(e){return this.serverProcessor=e,this.action_param="!nativeeditor_status",this.object=null,this.updatedRows=[],this.autoUpdate=!0,this.updateMode="cell",this._tMode="GET",this._headers=null,this._payload=null,this.post_delim="_",this._waitMode=0,this._in_progress={},this._invalid={},this.mandatoryFields=[],this.messages=[],this.styles={updated:"font-weight:bold;",inserted:"font-weight:bold;",deleted:"text-decoration : line-through;",invalid:"background-color:FFE0E0;",invalid_cell:"border-bottom:2px solid red;",error:"color:red;",clear:"font-weight:normal;text-decoration:none;"},this.enableUTFencoding(!0),dhtmlxEventable(this),this},e,t;dataProcessor.prototype={setTransactionMode:function(e,t){"object"==typeof e?(this._tMode=e.mode||this._tMode,void 0!==e.headers&&(this._headers=e.headers),void 0!==e.payload&&(this._payload=e.payload)):(this._tMode=e,this._tSend=t),"REST"==this._tMode&&(this._tSend=!1,this._endnm=!0),"JSON"==this._tMode&&(this._tSend=!1,this._endnm=!0,this._headers=this._headers||{},this._headers["Content-type"]="application/json")},escape:function(e){return this._utf?encodeURIComponent(e):escape(e)},enableUTFencoding:function(e){this._utf=!!e},setDataColumns:function(e){this._columns="string"==typeof e?e.split(","):e},getSyncState:function(){return!this.updatedRows.length},enableDataNames:function(e){this._endnm=!!e},enablePartialDataSend:function(e){this._changed=!!e},setUpdateMode:function(e,t){this.autoUpdate="cell"==e,this.updateMode=e,this.dnd=t},ignore:function(e,t){this._silent_mode=!0,e.call(t||window),this._silent_mode=!1},setUpdated:function(e,t,n){if(!this._silent_mode){var i=this.findRow(e);n=n||"updated";var l=this.obj.getUserData(e,this.action_param);l&&"updated"==n&&(n=l),t?(this.set_invalid(e,!1),this.updatedRows[i]=e,this.obj.setUserData(e,this.action_param,n),this._in_progress[e]&&(this._in_progress[e]="wait")):this.is_invalid(e)||(this.updatedRows.splice(i,1),this.obj.setUserData(e,this.action_param,"")),t||this._clearUpdateFlag(e),this.markRow(e,t,n),t&&this.autoUpdate&&this.sendData(e)}},_clearUpdateFlag:function(e){},markRow:function(e,t,n){var i="",l=this.is_invalid(e);if(l&&(i=this.styles[l],t=!0),this.callEvent("onRowMark",[e,t,n,l])&&(this.obj[this._methods[0]](e,i=this.styles[t?n:"clear"]+i),l&&l.details)){i+=this.styles[l+"_cell"];for(var s=0;s<l.details.length;s++)l.details[s]&&this.obj[this._methods[1]](e,s,i)}},getState:function(e){return this.obj.getUserData(e,this.action_param)},is_invalid:function(e){return this._invalid[e]},set_invalid:function(e,t,n){n&&(t={value:t,details:n,toString:function(){return this.value.toString()}}),this._invalid[e]=t},checkBeforeUpdate:function(e){return!0},sendData:function(e){return!this._waitMode||"tree"!=this.obj.mytype&&!this.obj._h2?(this.obj.editStop&&this.obj.editStop(),void 0===e||this._tSend?this.sendAllData():!this._in_progress[e]&&(this.messages=[],!(!this.checkBeforeUpdate(e)&&this.callEvent("onValidationError",[e,this.messages]))&&void this._beforeSendData(this._getRowData(e),e))):void 0},_beforeSendData:function(e,t){return!!this.callEvent("onBeforeUpdate",[t,this.getState(t),e])&&void this._sendData(e,t)},serialize:function(e,t){if("string"==typeof e)return e;if(void 0!==t)return this.serialize_one(e,"");var n=[],i=[];for(var l in e)e.hasOwnProperty(l)&&(n.push(this.serialize_one(e[l],l+this.post_delim)),i.push(l));return n.push("ids="+this.escape(i.join(","))),dhtmlx.security_key&&n.push("dhx_security="+dhtmlx.security_key),n.join("&")},serialize_one:function(e,t){if("string"==typeof e)return e;var n=[];for(var i in e)if(e.hasOwnProperty(i)){if(("id"==i||i==this.action_param)&&"REST"==this._tMode)continue;n.push(this.escape((t||"")+i)+"="+this.escape(e[i]))}return n.join("&")},_applyPayload:function(e){var t=this.obj.$ajax;if(this._payload)for(var n in this._payload)e=e+t.urlSeparator(e)+this.escape(n)+"="+this.escape(this._payload[n]);return e},_sendData:function(e,t){if(e){if(!this.callEvent("onBeforeDataSending",t?[t,this.getState(t),e]:[null,null,e]))return!1;t&&(this._in_progress[t]=(new Date).valueOf());var n=this,i=function(i){var l=[];if(t)l.push(t);else if(e)for(var s in e)l.push(s);return n.afterUpdate(n,i,l)},l=this.obj.$ajax,s=this.serverProcessor+(this._user?l.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+this.obj.getUserData(0,"version")].join("&"):""),r=this._applyPayload(s);if("GET"==this._tMode)l.query({url:r+l.urlSeparator(r)+this.serialize(e,t),method:"GET",callback:i,headers:this._headers});else if("POST"==this._tMode)l.query({url:r,method:"POST",headers:this._headers,data:this.serialize(e,t),callback:i});else if("JSON"==this._tMode){var a=e[this.action_param],d={};for(var o in e)d[o]=e[o];delete d[this.action_param],delete d.id,delete d.gr_id,l.query({url:r,method:"POST",headers:this._headers,callback:i,data:JSON.stringify({id:t,action:a,data:d})})}else if("REST"==this._tMode){var h=this.getState(t),_=s.replace(/(\&|\?)editing\=true/,""),c=(d="","post");"inserted"==h?d=this.serialize(e,t):"deleted"==h?(c="DELETE",_=_+("/"==_.slice(-1)?"":"/")+t):(c="PUT",d=this.serialize(e,t),_=_+("/"==_.slice(-1)?"":"/")+t),_=this._applyPayload(_),l.query({url:_,method:c,headers:this._headers,data:d,callback:i})}this._waitMode++}},sendAllData:function(){if(this.updatedRows.length){this.messages=[];for(var e=!0,t=0;t<this.updatedRows.length;t++)e&=this.checkBeforeUpdate(this.updatedRows[t]);if(!e&&!this.callEvent("onValidationError",["",this.messages]))return!1;if(this._tSend)this._sendData(this._getAllData());else for(t=0;t<this.updatedRows.length;t++)if(!this._in_progress[this.updatedRows[t]]){if(this.is_invalid(this.updatedRows[t]))continue;if(this._beforeSendData(this._getRowData(this.updatedRows[t]),this.updatedRows[t]),this._waitMode&&("tree"==this.obj.mytype||this.obj._h2))return}}},_getAllData:function(e){for(var t={},n=!1,i=0;i<this.updatedRows.length;i++){var l=this.updatedRows[i];if(!this._in_progress[l]&&!this.is_invalid(l)){var s=this._getRowData(l);this.callEvent("onBeforeUpdate",[l,this.getState(l),s])&&(t[l]=s,n=!0,this._in_progress[l]=(new Date).valueOf())}}return n?t:null},setVerificator:function(e,t){this.mandatoryFields[e]=t||function(e){return""!==e}},clearVerificator:function(e){this.mandatoryFields[e]=!1},findRow:function(e){var t=0;for(t=0;t<this.updatedRows.length&&e!=this.updatedRows[t];t++);return t},defineAction:function(e,t){this._uActions||(this._uActions=[]),this._uActions[e]=t},afterUpdateCallback:function(e,t,n,i){var l=e,s="error"!=n&&"invalid"!=n;if(s||this.set_invalid(e,n),this._uActions&&this._uActions[n]&&!this._uActions[n](i))return delete this._in_progress[l];"wait"!=this._in_progress[l]&&this.setUpdated(e,!1);var r=e;switch(n){case"inserted":case"insert":t!=e&&(this.setUpdated(e,!1),this.obj[this._methods[2]](e,t),e=t);break;case"delete":case"deleted":return this.obj.setUserData(e,this.action_param,"true_deleted"),this.obj[this._methods[3]](e),delete this._in_progress[l],this.callEvent("onAfterUpdate",[e,n,t,i])}"wait"!=this._in_progress[l]?(s&&this.obj.setUserData(e,this.action_param,""),delete this._in_progress[l]):(delete this._in_progress[l],this.setUpdated(t,!0,this.obj.getUserData(e,this.action_param))),this.callEvent("onAfterUpdate",[r,n,t,i])},afterUpdate:function(e,t,n){var i=this.obj.$ajax;if(window.JSON){var l;try{l=JSON.parse(t.xmlDoc.responseText)}catch(e){t.xmlDoc.responseText.length||(l={})}if(l){var s=l.action||this.getState(n)||"updated";return e.afterUpdateCallback(h=l.sid||n[0],_=l.tid||n[0],s,l),void e.finalizeUpdate()}}var r=i.xmltop("data",t.xmlDoc);if(!r)return this.cleanUpdate(n);var a=i.xpath("//data/action",r);if(!a.length)return this.cleanUpdate(n);for(var d=0;d<a.length;d++){var o=a[d],h=(s=o.getAttribute("type"),o.getAttribute("sid")),_=o.getAttribute("tid");e.afterUpdateCallback(h,_,s,o)}e.finalizeUpdate()},cleanUpdate:function(e){if(e)for(var t=0;t<e.length;t++)delete this._in_progress[e[t]]},finalizeUpdate:function(){this._waitMode&&this._waitMode--,("tree"==this.obj.mytype||this.obj._h2)&&this.updatedRows.length&&this.sendData(),this.callEvent("onAfterUpdateFinish",[]),this.updatedRows.length||this.callEvent("onFullSync",[])},init:function(e){this.obj=e,this.obj._dp_init&&this.obj._dp_init(this)},setOnAfterUpdate:function(e){this.attachEvent("onAfterUpdate",e)},enableDebug:function(e){},setOnBeforeUpdateHandler:function(e){this.attachEvent("onBeforeDataSending",e)},setAutoUpdate:function(e,t){e=e||2e3,this._user=t||(new Date).valueOf(),this._need_update=!1,this._update_busy=!1,this.attachEvent("onAfterUpdate",function(e,t,n,i){this.afterAutoUpdate(e,t,n,i)}),this.attachEvent("onFullSync",function(){this.fullSync()});var n=this;window.setInterval(function(){n.loadUpdate()},e)},afterAutoUpdate:function(e,t,n,i){return"collision"!=t||(this._need_update=!0,!1)},fullSync:function(){return this._need_update&&(this._need_update=!1,this.loadUpdate()),!0},getUpdates:function(e,t){var n=this.obj.$ajax;return!this._update_busy&&(this._update_busy=!0,void n.get(e,t))},_v:function(e){return e.firstChild?e.firstChild.nodeValue:""},_a:function(e){for(var t=[],n=0;n<e.length;n++)t[n]=this._v(e[n]);return t},loadUpdate:function(){var e=this.obj.$ajax,t=this,n=this.obj.getUserData(0,"version"),i=this.serverProcessor+e.urlSeparator(this.serverProcessor)+["dhx_user="+this._user,"dhx_version="+n].join("&");i=i.replace("editing=true&",""),this.getUpdates(i,function(n){var i=e.xpath("//userdata",n);t.obj.setUserData(0,"version",t._v(i[0]));var l=e.xpath("//update",n);if(l.length){t._silent_mode=!0;for(var s=0;s<l.length;s++){var r=l[s].getAttribute("status"),a=l[s].getAttribute("id"),d=l[s].getAttribute("parent");switch(r){case"inserted":t.callEvent("insertCallback",[l[s],a,d]);break;case"updated":t.callEvent("updateCallback",[l[s],a,d]);break;case"deleted":t.callEvent("deleteCallback",[l[s],a,d])}}t._silent_mode=!1}t._update_busy=!1,t=null})}},window.dataProcessor&&!dataProcessor.prototype.init_original&&(dataProcessor.prototype.init_original=dataProcessor.prototype.init,dataProcessor.prototype.init=function(e){this.init_original(e),e._dataprocessor=this,this.setTransactionMode("POST",!0),this.serverProcessor+=(-1!=this.serverProcessor.indexOf("?")?"&":"?")+"editing=true"}),dhtmlxError.catchError("LoadXML",function(e,t,n){var i=n[0].responseText;switch(scheduler.config.ajax_error){case"alert":window.alert(i);break;case"console":window.console.log(i)}}),function(){function e(e){return(e+"").replace(n," ").replace(i," ")}function t(e){return(e+"").replace(l,"&#39;")}var n=new RegExp("<(?:.|\n)*?>","gm"),i=new RegExp(" +","gm"),l=new RegExp("'","gm");for(var s in scheduler._waiAria={getAttributeString:function(n){var i=[" "];for(var l in n)if("function"!=typeof n[l]&&"object"!=typeof n[l]){var s=t(e(n[l]));i.push(l+"='"+s+"'")}return i.push(" "),i.join(" ")},setAttributes:function(t,n){for(var i in n)t.setAttribute(i,e(n[i]));return t},labelAttr:function(e,t){return this.setAttributes(e,{"aria-label":t})},label:function(e){return scheduler._waiAria.getAttributeString({"aria-label":e})},hourScaleAttr:function(e,t){this.labelAttr(e,t)},monthCellAttr:function(e,t){this.labelAttr(e,scheduler.templates.day_date(t))},navBarDateAttr:function(e,t){this.labelAttr(e,t)},dayHeaderAttr:function(e,t){this.labelAttr(e,t)},dayColumnAttr:function(e,t){this.dayHeaderAttr(e,scheduler.templates.day_date(t))},headerButtonsAttributes:function(e,t){return this.setAttributes(e,{role:"button","aria-label":t})},headerToggleState:function(e,t){return this.setAttributes(e,{"aria-pressed":t?"true":"false"})},getHeaderCellAttr:function(e){return scheduler._waiAria.getAttributeString({"aria-label":e})},eventAttr:function(e,t){this._eventCommonAttr(e,t)},_eventCommonAttr:function(t,n){n.setAttribute("aria-label",e(scheduler.templates.tooltip_text(t.start_date,t.end_date,t))),scheduler.config.readonly&&n.setAttribute("aria-readonly",!0),t.$dataprocessor_class&&n.setAttribute("aria-busy",!0),n.setAttribute("aria-selected",scheduler.getState().select_id==t.id?"true":"false")},setEventBarAttr:function(e,t){this._eventCommonAttr(e,t)},_getAttributes:function(e,t){var n={setAttribute:function(e,t){this[e]=t}};return e.apply(this,[t,n]),n},eventBarAttrString:function(e){return this.getAttributeString(this._getAttributes(this.setEventBarAttr,e))},agendaHeadAttrString:function(){return this.getAttributeString({role:"row"})},agendaHeadDateString:function(e){return this.getAttributeString({role:"columnheader","aria-label":e})},agendaHeadDescriptionString:function(e){return this.agendaHeadDateString(e)},agendaDataAttrString:function(){return this.getAttributeString({role:"grid"})},agendaEventAttrString:function(e){var t=this._getAttributes(this._eventCommonAttr,e);return t.role="row",this.getAttributeString(t)},agendaDetailsBtnString:function(){return this.getAttributeString({role:"button","aria-label":scheduler.locale.labels.icon_details})},gridAttrString:function(){return this.getAttributeString({role:"grid"})},gridRowAttrString:function(e){return this.agendaEventAttrString(e)},gridCellAttrString:function(e,t,n){return this.getAttributeString({role:"gridcell","aria-label":[void 0===t.label?t.id:t.label,": ",n]})},mapAttrString:function(){return this.gridAttrString()},mapRowAttrString:function(e){return this.gridRowAttrString(e)},mapDetailsBtnString:function(){return this.agendaDetailsBtnString()},minicalHeader:function(e,t){this.setAttributes(e,{id:t+"","aria-live":"assertice","aria-atomic":"true"})},minicalGrid:function(e,t){this.setAttributes(e,{"aria-labelledby":t+"",role:"grid"})},minicalRow:function(e){this.setAttributes(e,{role:"row"})},minicalDayCell:function(e,t){var n=t.valueOf()<scheduler._max_date.valueOf()&&t.valueOf()>=scheduler._min_date.valueOf();this.setAttributes(e,{role:"gridcell","aria-label":scheduler.templates.day_date(t),"aria-selected":n?"true":"false"})},minicalHeadCell:function(e){this.setAttributes(e,{role:"columnheader"})},weekAgendaDayCell:function(e,t){var n=e.querySelector(".dhx_wa_scale_bar"),i=e.querySelector(".dhx_wa_day_data"),l=scheduler.uid()+"";this.setAttributes(n,{id:l}),this.setAttributes(i,{"aria-labelledby":l})},weekAgendaEvent:function(e,t){this.eventAttr(t,e)},lightboxHiddenAttr:function(e){e.setAttribute("aria-hidden","true")},lightboxVisibleAttr:function(e){e.setAttribute("aria-hidden","false")},lightboxSectionButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":e,tabindex:"0"})},yearHeader:function(e,t){this.setAttributes(e,{id:t+""})},yearGrid:function(e,t){this.minicalGrid(e,t)},yearHeadCell:function(e){return this.minicalHeadCell(e)},yearRow:function(e){return this.minicalRow(e)},yearDayCell:function(e){this.setAttributes(e,{role:"gridcell"})},lightboxAttr:function(e){e.setAttribute("role","dialog"),e.setAttribute("aria-hidden","true"),e.firstChild.setAttribute("role","heading")},lightboxButtonAttrString:function(e){return this.getAttributeString({role:"button","aria-label":scheduler.locale.labels[e],tabindex:"0"})},eventMenuAttrString:function(e){return this.getAttributeString({role:"button","aria-label":scheduler.locale.labels[e]})},lightboxHeader:function(e,t){e.setAttribute("aria-label",t)},lightboxSelectAttrString:function(e){var t="";switch(e){case"%Y":t=scheduler.locale.labels.year;break;case"%m":t=scheduler.locale.labels.month;break;case"%d":t=scheduler.locale.labels.day;break;case"%H:%i":t=scheduler.locale.labels.hour+" "+scheduler.locale.labels.minute}return scheduler._waiAria.getAttributeString({"aria-label":t})},messageButtonAttrString:function(e){return"tabindex='0' role='button' aria-label='"+e+"'"},messageInfoAttr:function(e){e.setAttribute("role","alert")},messageModalAttr:function(e,t){e.setAttribute("role","dialog"),t&&e.setAttribute("aria-labelledby",t)},quickInfoAttr:function(e){e.setAttribute("role","dialog")},quickInfoHeaderAttrString:function(){return" role='heading' "},quickInfoHeader:function(e,t){e.setAttribute("aria-label",t)},quickInfoButtonAttrString:function(e){return scheduler._waiAria.getAttributeString({role:"button","aria-label":e,tabindex:"0"})},tooltipAttr:function(e){e.setAttribute("role","tooltip")},tooltipVisibleAttr:function(e){e.setAttribute("aria-hidden","false")},tooltipHiddenAttr:function(e){e.setAttribute("aria-hidden","true")}},scheduler._waiAria)scheduler._waiAria[s]=function(e){return function(){return scheduler.config.wai_aria_attributes?e.apply(this,arguments):" "}}(scheduler._waiAria[s])}(),dhtmlxEventable(scheduler),scheduler._detachDomEvent=function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent&&e.detachEvent("on"+t,n)},scheduler._init_once=function(){function e(e){for(var t=document.body;e&&e!=t;)e=e.parentNode;return!(t!=e)}function t(){return{w:window.innerWidth||document.documentElement.clientWidth,h:window.innerHeight||document.documentElement.clientHeight}}var n=t();dhtmlxEvent(window,"resize",function(){e(scheduler._obj)&&(window.clearTimeout(scheduler._resize_timer),scheduler._resize_timer=window.setTimeout(function(){var i=t();if(n.w!=i.w||n.h!=i.h){if(!e(scheduler._obj))return;scheduler.callEvent("onSchedulerResize",[])&&(scheduler.update_view(),scheduler.callEvent("onAfterSchedulerResize",[]))}n=i},20))}),scheduler._init_once=function(){}},scheduler.init=function(e,t,n){t=t||scheduler._currentDate(),n=n||"week",this._obj&&this.unset_actions(),this._obj="string"==typeof e?document.getElementById(e):e,this.$container=this._obj,this.config.wai_aria_attributes&&this.config.wai_aria_application_role&&this.$container.setAttribute("role","application"),this._skin_init&&scheduler._skin_init(),scheduler.date.init(),this._els=[],this._scroll=!0,this._quirks=_isIE&&"BackCompat"==document.compatMode,this._quirks7=_isIE&&-1==navigator.appVersion.indexOf("MSIE 8"),this.get_elements(),this.init_templates(),this.set_actions(),this._init_once(),this._init_touch_events(),this.set_sizes(),scheduler.callEvent("onSchedulerReady",[]),this.setCurrentView(t,n)},scheduler.xy={min_event_height:40,scale_width:50,scroll_width:18,scale_height:20,month_scale_height:20,menu_width:25,margin_top:0,margin_left:0,editor_width:140,month_head_height:22,event_header_height:14},scheduler.keys={edit_save:13,edit_cancel:27},scheduler.set_sizes=function(){var e=this._x=this._obj.clientWidth-this.xy.margin_left,t=this._y=this._obj.clientHeight-this.xy.margin_top,n=this._table_view?0:this.xy.scale_width+this.xy.scroll_width,i=this._table_view?-1:this.xy.scale_width,l=this.$container.querySelector(".dhx_cal_scale_placeholder");scheduler._is_material_skin()?(l||((l=document.createElement("div")).className="dhx_cal_scale_placeholder",this.$container.insertBefore(l,this._els.dhx_cal_header[0])),l.style.display="block",this.set_xy(l,e,this.xy.scale_height+1,0,this.xy.nav_height+(this._quirks?-1:1))):l&&l.parentNode.removeChild(l),this.set_xy(this._els.dhx_cal_navline[0],e,this.xy.nav_height,0,0),this.set_xy(this._els.dhx_cal_header[0],e-n,this.xy.scale_height,i,this.xy.nav_height+(this._quirks?-1:1));var s=this._els.dhx_cal_navline[0].offsetHeight;s>0&&(this.xy.nav_height=s);var r=this.xy.scale_height+this.xy.nav_height+(this._quirks?-2:0);this.set_xy(this._els.dhx_cal_data[0],e,t-(r+2),0,r+2)},scheduler.set_xy=function(e,t,n,i,l){e.style.width=Math.max(0,t)+"px",e.style.height=Math.max(0,n)+"px",arguments.length>3&&(e.style.left=i+"px",e.style.top=l+"px")},scheduler.get_elements=function(){for(var e=this._obj.getElementsByTagName("DIV"),t=0;t<e.length;t++){var n=scheduler._getClassName(e[t]),i=e[t].getAttribute("name")||"";n&&(n=n.split(" ")[0]),this._els[n]||(this._els[n]=[]),this._els[n].push(e[t]);var l=scheduler.locale.labels[i||n];"string"!=typeof l&&i&&!e[t].innerHTML&&(l=i.split("_")[0]),l&&(this._waiAria.labelAttr(e[t],l),e[t].innerHTML=l)}},scheduler.unset_actions=function(){for(var e in this._els)if(this._click[e])for(var t=0;t<this._els[e].length;t++)this._els[e][t].onclick=null;this._obj.onselectstart=null,this._obj.onmousemove=null,this._obj.onmousedown=null,this._obj.onmouseup=null,this._obj.ondblclick=null,this._obj.oncontextmenu=null},scheduler.set_actions=function(){for(var e in this._els)if(this._click[e])for(var t=0;t<this._els[e].length;t++)this._els[e][t].onclick=scheduler._click[e];this._obj.onselectstart=function(e){return!1},this._obj.onmousemove=function(e){scheduler._temp_touch_block||scheduler._on_mouse_move(e||event)},this._obj.onmousedown=function(e){scheduler._ignore_next_click||scheduler._on_mouse_down(e||event)},this._obj.onmouseup=function(e){scheduler._ignore_next_click||scheduler._on_mouse_up(e||event)},this._obj.ondblclick=function(e){scheduler._on_dbl_click(e||event)},this._obj.oncontextmenu=function(e){var t=e||event;return scheduler.callEvent("onContextMenu",[scheduler._locate_event(t.target||t.srcElement),t])}},scheduler.select=function(e){this._select_id!=e&&(scheduler._close_not_saved(),this.editStop(!1),this.unselect(),this._select_id=e,this.updateEvent(e))},scheduler.unselect=function(e){if(!e||e==this._select_id){var t=this._select_id;this._select_id=null,t&&this.getEvent(t)&&this.updateEvent(t)}},scheduler.getState=function(){return{mode:this._mode,date:new Date(this._date),min_date:new Date(this._min_date),max_date:new Date(this._max_date),editor_id:this._edit_id,lightbox_id:this._lightbox_id,new_event:this._new_event,select_id:this._select_id,expanded:this.expanded,drag_id:this._drag_id,drag_mode:this._drag_mode}},scheduler._click={dhx_cal_data:function(e){if(scheduler._ignore_next_click)return e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,scheduler._ignore_next_click=!1,!1;var t=e?e.target:event.srcElement,n=scheduler._locate_event(t);if(e=e||event,n){if(!scheduler.callEvent("onClick",[n,e])||scheduler.config.readonly)return}else scheduler.callEvent("onEmptyClick",[scheduler.getActionData(e).date,e]);if(n&&scheduler.config.select){scheduler.select(n);var i=scheduler._getClassName(t);-1!=i.indexOf("_icon")&&scheduler._click.buttons[i.split(" ")[1].replace("icon_","")](n)}else scheduler._close_not_saved(),(new Date).valueOf()-(scheduler._new_event||0)>500&&scheduler.unselect()},dhx_cal_prev_button:function(){scheduler._click.dhx_cal_next_button(0,-1)},dhx_cal_next_button:function(e,t){scheduler.setCurrentView(scheduler.date.add(scheduler.date[scheduler._mode+"_start"](scheduler._date),t||1,scheduler._mode))},dhx_cal_today_button:function(){scheduler.callEvent("onBeforeTodayDisplayed",[])&&scheduler.setCurrentView(scheduler._currentDate())},dhx_cal_tab:function(){var e=this.getAttribute("name"),t=e.substring(0,e.search("_tab"));scheduler.setCurrentView(scheduler._date,t)},buttons:{delete:function(e){var t=scheduler.locale.labels.confirm_deleting;scheduler._dhtmlx_confirm(t,scheduler.locale.labels.title_confirm_deleting,function(){scheduler.deleteEvent(e)})},edit:function(e){scheduler.edit(e)},save:function(e){scheduler.editStop(!0)},details:function(e){scheduler.showLightbox(e)},cancel:function(e){scheduler.editStop(!1)}}},scheduler._dhtmlx_confirm=function(e,t,n){if(!e)return n();var i={text:e};t&&(i.title=t),n&&(i.callback=function(e){e&&n()}),dhtmlx.confirm(i)},scheduler.addEventNow=function(e,t,n){var i={};scheduler._isObject(e)&&!scheduler._isDate(e)&&(i=e,e=null);var l=6e4*(this.config.event_duration||this.config.time_step);e||(e=i.start_date||Math.round(scheduler._currentDate().valueOf()/l)*l);var s=new Date(e);if(!t){var r=this.config.first_hour;r>s.getHours()&&(s.setHours(r),e=s.valueOf()),t=e.valueOf()+l}var a=new Date(t);s.valueOf()==a.valueOf()&&a.setTime(a.valueOf()+l),i.start_date=i.start_date||s,i.end_date=i.end_date||a,i.text=i.text||this.locale.labels.new_event,i.id=this._drag_id=i.id||this.uid(),this._drag_mode="new-size",this._loading=!0;var d=this.addEvent(i);return this.callEvent("onEventCreated",[this._drag_id,n]),this._loading=!1,this._drag_event={},this._on_mouse_up(n),d},scheduler._on_dbl_click=function(e,t){if(t=t||e.target||e.srcElement,!this.config.readonly){var n=scheduler._getClassName(t).split(" ")[0];switch(n){case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_wa_day_data":if(!scheduler.config.dblclick_create)break;this.addEventNow(this.getActionData(e).date,null,e);break;case"dhx_cal_event":case"dhx_wa_ev_body":case"dhx_agenda_line":case"dhx_grid_event":case"dhx_cal_event_line":case"dhx_cal_event_clear":var i=this._locate_event(t);if(!this.callEvent("onDblClick",[i,e]))return;this.config.details_on_dblclick||this._table_view||!this.getEvent(i)._timed||!this.config.select?this.showLightbox(i):this.edit(i);break;case"dhx_time_block":case"dhx_cal_container":return;default:var l=this["dblclick_"+n];if(l)l.call(this,e);else if(t.parentNode&&t!=this)return scheduler._on_dbl_click(e,t.parentNode)}}},scheduler._get_column_index=function(e){var t=0;if(this._cols){for(var n=0,i=0;n+this._cols[i]<e&&i<this._cols.length;)n+=this._cols[i],i++;if(t=i+(this._cols[i]?(e-n)/this._cols[i]:0),this._ignores&&t>=this._cols.length)for(;t>=1&&this._ignores[Math.floor(t)];)t--}return t},scheduler._week_indexes_from_pos=function(e){if(this._cols){var t=this._get_column_index(e.x);return e.x=Math.min(this._cols.length-1,Math.max(0,Math.ceil(t)-1)),e.y=Math.max(0,Math.ceil(60*e.y/(this.config.time_step*this.config.hour_size_px))-1)+this.config.first_hour*(60/this.config.time_step),e}return e},scheduler._mouse_coords=function(e){var t,n=document.body,i=document.documentElement;(t=_isIE||!e.pageX&&!e.pageY?{x:e.clientX+(n.scrollLeft||i.scrollLeft||0)-n.clientLeft,y:e.clientY+(n.scrollTop||i.scrollTop||0)-n.clientTop}:{x:e.pageX,y:e.pageY}).x-=this.$domHelpers.getAbsoluteLeft(this._obj)+(this._table_view?0:this.xy.scale_width),t.y-=this.$domHelpers.getAbsoluteTop(this._obj)+this.xy.nav_height+(this._dy_shift||0)+this.xy.scale_height-this._els.dhx_cal_data[0].scrollTop,t.ev=e;var l=this["mouse_"+this._mode];if(l)t=l.call(this,t);else if(this._table_view){var s=this._get_column_index(t.x);if(!this._cols||!this._colsS)return t;var r=0;for(r=1;r<this._colsS.heights.length&&!(this._colsS.heights[r]>t.y);r++);t.y=Math.ceil(24*(Math.max(0,s)+7*Math.max(0,r-1))*60/this.config.time_step),(scheduler._drag_mode||"month"==this._mode)&&(t.y=24*(Math.max(0,Math.ceil(s)-1)+7*Math.max(0,r-1))*60/this.config.time_step),"move"==this._drag_mode&&scheduler._ignores_detected&&scheduler.config.preserve_length&&(t._ignores=!0,this._drag_event._event_length||(this._drag_event._event_length=this._get_real_event_length(this._drag_event.start_date,this._drag_event.end_date,{x_step:1,x_unit:"day"}))),t.x=0}else t=this._week_indexes_from_pos(t);return t.timestamp=+new Date,t},scheduler._close_not_saved=function(){if((new Date).valueOf()-(scheduler._new_event||0)>500&&scheduler._edit_id){var e=scheduler.locale.labels.confirm_closing;scheduler._dhtmlx_confirm(e,scheduler.locale.labels.title_confirm_closing,function(){scheduler.editStop(scheduler.config.positive_closing)}),e&&(this._drag_id=this._drag_pos=this._drag_mode=null)}},scheduler._correct_shift=function(e,t){return e-6e4*(new Date(scheduler._min_date).getTimezoneOffset()-new Date(e).getTimezoneOffset())*(t?-1:1)},scheduler._is_pos_changed=function(e,t){function n(e,t,n){return!!(Math.abs(e-t)>n)}return!e||!this._drag_pos||!!(this._drag_pos.has_moved||!this._drag_pos.timestamp||t.timestamp-this._drag_pos.timestamp>100||n(e.ev.clientX,t.ev.clientX,5)||n(e.ev.clientY,t.ev.clientY,5))},scheduler._correct_drag_start_date=function(e){var t;scheduler.matrix&&(t=scheduler.matrix[scheduler._mode]),t=t||{x_step:1,x_unit:"day"},e=new Date(e);var n=1;return(t._start_correction||t._end_correction)&&(n=60*(t.last_hour||0)-(60*e.getHours()+e.getMinutes())||1),1*e+(scheduler._get_fictional_event_length(e,n,t)-n)},scheduler._correct_drag_end_date=function(e,t){var n;scheduler.matrix&&(n=scheduler.matrix[scheduler._mode]),n=n||{x_step:1,x_unit:"day"};var i=1*e+scheduler._get_fictional_event_length(e,t,n);return new Date(1*i-(scheduler._get_fictional_event_length(i,-1,n,-1)+1))},scheduler._on_mouse_move=function(e){if(this._drag_mode){var t=this._mouse_coords(e);if(this._is_pos_changed(this._drag_pos,t)){var n,i;if(this._edit_id!=this._drag_id&&this._close_not_saved(),!this._drag_mode)return;var l=null;if(this._drag_pos&&!this._drag_pos.has_moved&&((l=this._drag_pos).has_moved=!0),this._drag_pos=t,this._drag_pos.has_moved=!0,"create"==this._drag_mode){if(l&&(t=l),this._close_not_saved(),this.unselect(this._select_id),this._loading=!0,n=this._get_date_from_pos(t).valueOf(),!this._drag_start)return this.callEvent("onBeforeEventCreated",[e,this._drag_id])?(this._loading=!1,void(this._drag_start=n)):void(this._loading=!1);i=n;var s=new Date(this._drag_start),r=new Date(i);"day"!=this._mode&&"week"!=this._mode||s.getHours()!=r.getHours()||s.getMinutes()!=r.getMinutes()||(r=new Date(this._drag_start+1e3)),this._drag_id=this.uid(),this.addEvent(s,r,this.locale.labels.new_event,this._drag_id,t.fields),this.callEvent("onEventCreated",[this._drag_id,e]),this._loading=!1,this._drag_mode="new-size"}var a,d=this.getEvent(this._drag_id);if(scheduler.matrix&&(a=scheduler.matrix[scheduler._mode]),a=a||{x_step:1,x_unit:"day"},"move"==this._drag_mode)n=this._min_date.valueOf()+6e4*(t.y*this.config.time_step+24*t.x*60-(scheduler._move_pos_shift||0)),!t.custom&&this._table_view&&(n+=1e3*this.date.time_part(d.start_date)),n=this._correct_shift(n),t._ignores&&this.config.preserve_length&&this._table_view?(n=scheduler._correct_drag_start_date(n),i=scheduler._correct_drag_end_date(n,this._drag_event._event_length)):i=d.end_date.valueOf()-(d.start_date.valueOf()-n);else{if(n=d.start_date.valueOf(),i=d.end_date.valueOf(),this._table_view){var o=this._min_date.valueOf()+t.y*this.config.time_step*6e4+(t.custom?0:864e5);if("month"==this._mode)if(o=this._correct_shift(o,!1),this._drag_from_start){var h=864e5;o<=scheduler.date.date_part(new Date(i+h-1)).valueOf()&&(n=o-h)}else i=o;else this.config.preserve_length?t.resize_from_start?n=scheduler._correct_drag_start_date(o):i=scheduler._correct_drag_end_date(o,0):t.resize_from_start?n=o:i=o}else{var _=this.date.date_part(new Date(d.end_date.valueOf()-1)).valueOf(),c=new Date(_);i=_+t.y*this.config.time_step*6e4,i+=6e4*(new Date(i).getTimezoneOffset()-c.getTimezoneOffset()),this._els.dhx_cal_data[0].style.cursor="s-resize",("week"==this._mode||"day"==this._mode)&&(i=this._correct_shift(i))}if("new-size"==this._drag_mode)if(i<=this._drag_start){var u=t.shift||(this._table_view&&!t.custom?864e5:0);n=i-(t.shift?0:u),i=this._drag_start+(u||6e4*this.config.time_step)}else n=this._drag_start;else n>=i&&(i=n+6e4*this.config.time_step)}var g=new Date(i-1),f=new Date(n);if("move"==this._drag_mode&&scheduler.config.limit_drag_out&&(+f<+scheduler._min_date||+i>+scheduler._max_date)){if(+d.start_date<+scheduler._min_date||+d.end_date>+scheduler._max_date)f=new Date(d.start_date),i=new Date(d.end_date);else{var v=i-f;+f<+scheduler._min_date?(f=new Date(scheduler._min_date),t._ignores&&this.config.preserve_length&&this._table_view?(f=new Date(scheduler._correct_drag_start_date(f)),a._start_correction&&(f=new Date(f.valueOf()+a._start_correction)),i=new Date(1*f+this._get_fictional_event_length(f,this._drag_event._event_length,a))):i=new Date(+f+v)):(i=new Date(scheduler._max_date),t._ignores&&this.config.preserve_length&&this._table_view?(a._end_correction&&(i=new Date(i.valueOf()-a._end_correction)),i=new Date(1*i-this._get_fictional_event_length(i,0,a,!0)),f=new Date(1*i-this._get_fictional_event_length(i,this._drag_event._event_length,a,!0)),this._ignores_detected&&(f=scheduler.date.add(f,a.x_step,a.x_unit),i=new Date(1*i-this._get_fictional_event_length(i,0,a,!0)),i=scheduler.date.add(i,a.x_step,a.x_unit))):f=new Date(+i-v))}g=new Date(i-1)}if(this._table_view||scheduler.config.all_timed||!(!scheduler._get_section_view()&&t.x!=this._get_event_sday({start_date:new Date(i),end_date:new Date(i)})||new Date(i).getHours()>=this.config.last_hour)||(v=i-f,h=this._min_date.valueOf()+24*t.x*60*6e4,(i=scheduler.date.date_part(new Date(h))).setHours(this.config.last_hour),g=new Date(i-1),"move"==this._drag_mode&&(f=new Date(+i-v))),this._table_view||g.getDate()==f.getDate()&&g.getHours()<this.config.last_hour||scheduler._allow_dnd)if(d.start_date=f,d.end_date=new Date(i),this.config.update_render){var m=scheduler._els.dhx_cal_data[0].scrollTop;this.update_view(),scheduler._els.dhx_cal_data[0].scrollTop=m}else this.updateEvent(this._drag_id);this._table_view&&this.for_rendered(this._drag_id,function(e){e.className+=" dhx_in_move dhx_cal_event_drag"}),this.callEvent("onEventDrag",[this._drag_id,this._drag_mode,e])}}else if(scheduler.checkEvent("onMouseMove")){var p=this._locate_event(e.target||e.srcElement);this.callEvent("onMouseMove",[p,e])}},scheduler._on_mouse_down=function(e,t){if(2!=e.button&&!this.config.readonly&&!this._drag_mode){t=t||e.target||e.srcElement;var n=scheduler._getClassName(t).split(" ")[0];switch(n){case"dhx_cal_event_line":case"dhx_cal_event_clear":this._table_view&&(this._drag_mode="move");break;case"dhx_event_move":case"dhx_wa_ev_body":this._drag_mode="move";break;case"dhx_event_resize":this._drag_mode="resize",scheduler._getClassName(t).indexOf("dhx_event_resize_end")<0?scheduler._drag_from_start=!0:scheduler._drag_from_start=!1;break;case"dhx_scale_holder":case"dhx_scale_holder_now":case"dhx_month_body":case"dhx_matrix_cell":case"dhx_marked_timespan":this._drag_mode="create";break;case"":if(t.parentNode)return scheduler._on_mouse_down(e,t.parentNode);break;default:if((!scheduler.checkEvent("onMouseDown")||scheduler.callEvent("onMouseDown",[n,e]))&&t.parentNode&&t!=this&&"dhx_body"!=n)return scheduler._on_mouse_down(e,t.parentNode);this._drag_mode=null,this._drag_id=null}if(this._drag_mode){var i=this._locate_event(t);if(this.config["drag_"+this._drag_mode]&&this.callEvent("onBeforeDrag",[i,this._drag_mode,e])){if(this._drag_id=i,(this._edit_id!=this._drag_id||this._edit_id&&"create"==this._drag_mode)&&this._close_not_saved(),!this._drag_mode)return;this._drag_event=scheduler._lame_clone(this.getEvent(this._drag_id)||{}),this._drag_pos=this._mouse_coords(e)}else this._drag_mode=this._drag_id=0}this._drag_start=null}},scheduler._get_private_properties=function(e){var t={};for(var n in e)0===n.indexOf("_")&&(t[n]=!0);return t},scheduler._clear_temporary_properties=function(e,t){var n=this._get_private_properties(e),i=this._get_private_properties(t);for(var l in i)n[l]||delete t[l]},scheduler._on_mouse_up=function(e){if(!e||2!=e.button||!this._mobile){if(this._drag_mode&&this._drag_id){this._els.dhx_cal_data[0].style.cursor="default";var t=this._drag_id,n=this._drag_mode,i=!this._drag_pos||this._drag_pos.has_moved,l=this.getEvent(this._drag_id);if(i&&(this._drag_event._dhx_changed||!this._drag_event.start_date||l.start_date.valueOf()!=this._drag_event.start_date.valueOf()||l.end_date.valueOf()!=this._drag_event.end_date.valueOf())){var s="new-size"==this._drag_mode;if(this.callEvent("onBeforeEventChanged",[l,e,s,this._drag_event]))if(this._drag_id=this._drag_mode=null,s&&this.config.edit_on_create){if(this.unselect(),this._new_event=new Date,this._table_view||this.config.details_on_create||!this.config.select||!this.isOneDayEvent(this.getEvent(t)))return scheduler.callEvent("onDragEnd",[t,n,e]),this.showLightbox(t);this._drag_pos=!0,this._select_id=this._edit_id=t}else this._new_event||this.callEvent(s?"onEventAdded":"onEventChanged",[t,this.getEvent(t)]);else s?this.deleteEvent(l.id,!0):(this._drag_event._dhx_changed=!1,this._clear_temporary_properties(l,this._drag_event),scheduler._lame_copy(l,this._drag_event),this.updateEvent(l.id))}this._drag_pos&&(this._drag_pos.has_moved||!0===this._drag_pos)&&(this._drag_id=this._drag_mode=null,this.render_view_data()),scheduler.callEvent("onDragEnd",[t,n,e])}this._drag_id=null,this._drag_mode=null,this._drag_pos=null}},scheduler._trigger_dyn_loading=function(){return!(!this._load_mode||!this._load()||(this._render_wait=!0,0))},scheduler.update_view=function(){this._reset_ignores();var e=this[this._mode+"_view"];return e?e(!0):this._reset_scale(),!!this._trigger_dyn_loading()||void this.render_view_data()},scheduler.isViewExists=function(e){return!!(scheduler[e+"_view"]||scheduler.date[e+"_start"]&&scheduler.templates[e+"_date"]&&scheduler.templates[e+"_scale_date"])},scheduler._set_aria_buttons_attrs=function(){for(var e=["dhx_cal_next_button","dhx_cal_prev_button","dhx_cal_tab","dhx_cal_today_button"],t=0;t<e.length;t++)for(var n=this._els[e[t]],i=0;n&&i<n.length;i++){var l=n[i].getAttribute("name"),s=this.locale.labels[e[t]];l&&(s=this.locale.labels[l]||s),"dhx_cal_next_button"==e[t]?s=this.locale.labels.next:"dhx_cal_prev_button"==e[t]&&(s=this.locale.labels.prev),this._waiAria.headerButtonsAttributes(n[i],s||"")}},scheduler.updateView=function(e,t){e=e||this._date;var n="dhx_cal_data",i=this._obj,l="dhx_scheduler_"+this._mode,s="dhx_scheduler_"+(t=t||this._mode);this._mode&&-1!=i.className.indexOf(l)?i.className=i.className.replace(l,s):i.className+=" "+s;var r,a="dhx_multi_day",d=!(this._mode!=t||!this.config.preserve_scroll)&&this._els[n][0].scrollTop;this._els[a]&&this._els[a][0]&&(r=this._els[a][0].scrollTop),this[this._mode+"_view"]&&t&&this._mode!=t&&this[this._mode+"_view"](!1),this._close_not_saved(),this._els[a]&&(this._els[a][0].parentNode.removeChild(this._els[a][0]),this._els[a]=null),this._mode=t,this._date=e,this._table_view="month"==this._mode,this._dy_shift=0,this._set_aria_buttons_attrs();var o=this._els.dhx_cal_tab;if(o)for(var h=0;h<o.length;h++){var _=o[h],c=_.className;c=c.replace(/ active/g,""),_.getAttribute("name")==this._mode+"_tab"?(c+=" active",this._waiAria.headerToggleState(_,!0)):this._waiAria.headerToggleState(_,!1),_.className=c}this.update_view(),"number"==typeof d&&(this._els[n][0].scrollTop=d),"number"==typeof r&&this._els[a]&&this._els[a][0]&&(this._els[a][0].scrollTop=r)},scheduler.setCurrentView=function(e,t){this.callEvent("onBeforeViewChange",[this._mode,this._date,t||this._mode,e||this._date])&&(this.updateView(e,t),this.callEvent("onViewChange",[this._mode,this._date]))},scheduler._render_x_header=function(e,t,n,i,l){l=l||0;var s=document.createElement("div");s.className="dhx_scale_bar",this.templates[this._mode+"_scalex_class"]&&(s.className+=" "+this.templates[this._mode+"_scalex_class"](n));var r=this._cols[e]-1;"month"==this._mode&&0===e&&this.config.left_border&&(s.className+=" dhx_scale_bar_border",t+=1),this.set_xy(s,r,this.xy.scale_height-2,t,l);var a=this.templates[this._mode+"_scale_date"](n,this._mode);s.innerHTML=a,this._waiAria.dayHeaderAttr(s,a),i.appendChild(s)},scheduler._get_columns_num=function(e,t){var n=7;if(!scheduler._table_view){var i=scheduler.date["get_"+scheduler._mode+"_end"];i&&(t=i(e)),n=Math.round((t.valueOf()-e.valueOf())/864e5)}return n},scheduler._get_timeunit_start=function(){return this.date[this._mode+"_start"](new Date(this._date.valueOf()))},scheduler._get_view_end=function(){var e=this._get_timeunit_start(),t=scheduler.date.add(e,1,this._mode);if(!scheduler._table_view){var n=scheduler.date["get_"+scheduler._mode+"_end"];n&&(t=n(e))}return t},scheduler._calc_scale_sizes=function(e,t,n){var i=e,l=this._get_columns_num(t,n);this._process_ignores(t,l,"day",1);for(var s=l-this._ignores_detected,r=0;l>r;r++)this._ignores[r]?(this._cols[r]=0,s++):this._cols[r]=Math.floor(i/(s-r)),i-=this._cols[r],this._colsS[r]=(this._cols[r-1]||0)+(this._colsS[r-1]||(this._table_view?0:this.xy.scale_width+2));this._colsS.col_length=l,this._colsS[l]=this._cols[l-1]+this._colsS[l-1]||0},scheduler._set_scale_col_size=function(e,t,n){var i=this.config;this.set_xy(e,t-1,i.hour_size_px*(i.last_hour-i.first_hour),n+this.xy.scale_width+1,0)},scheduler._render_scales=function(e,t){var n=new Date(scheduler._min_date),i=new Date(scheduler._max_date),l=this.date.date_part(scheduler._currentDate()),s=parseInt(e.style.width,10),r=new Date(this._min_date),a=this._get_columns_num(n,i);this._calc_scale_sizes(s,n,i);var d=0;e.innerHTML="";for(var o=0;a>o;o++){if(this._ignores[o]||this._render_x_header(o,d,r,e),!this._table_view){var h=document.createElement("div"),_="dhx_scale_holder";r.valueOf()==l.valueOf()&&(_="dhx_scale_holder_now"),this._ignores_detected&&this._ignores[o]&&(_+=" dhx_scale_ignore"),h.className=_+" "+this.templates.week_date_class(r,l),this._waiAria.dayColumnAttr(h,r),this._set_scale_col_size(h,this._cols[o],d),t.appendChild(h),this.callEvent("onScaleAdd",[h,r])}d+=this._cols[o],r=this.date.add(r,1,"day"),r=this.date.day_start(r)}},scheduler._reset_scale=function(){if(this.templates[this._mode+"_date"]){var e=this._els.dhx_cal_header[0],t=this._els.dhx_cal_data[0],n=this.config;e.innerHTML="",t.innerHTML="",t.className="dhx_cal_data"+(n.readonly||!n.drag_resize?" dhx_resize_denied":"")+(n.readonly||!n.drag_move?" dhx_move_denied":""),this._scales={},this._cols=[],this._colsS={height:0},this._dy_shift=0,this.set_sizes();var i,l,s=this._get_timeunit_start(),r=scheduler._get_view_end();i=l=this._table_view?scheduler.date.week_start(s):s,this._min_date=i;var a=this.templates[this._mode+"_date"](s,r,this._mode);if(this._els.dhx_cal_date[0].innerHTML=a,this._waiAria.navBarDateAttr(this._els.dhx_cal_date[0],a),this._max_date=r,scheduler._render_scales(e,t),this._table_view)this._reset_month_scale(t,s,l);else if(this._reset_hours_scale(t,s,l),n.multi_day){var d="dhx_multi_day";this._els[d]&&(this._els[d][0].parentNode.removeChild(this._els[d][0]),this._els[d]=null);var o=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+1,h=document.createElement("div");h.className=d,h.style.visibility="hidden",this.set_xy(h,Math.max(this._colsS[this._colsS.col_length]+this.xy.scroll_width-2,0),0,0,o),t.parentNode.insertBefore(h,t);var _=h.cloneNode(!0);_.className=d+"_icon",_.style.visibility="hidden",this.set_xy(_,this.xy.scale_width,0,0,o),h.appendChild(_),this._els[d]=[h,_],this._els[d][0].onclick=this._click.dhx_cal_data}}},scheduler._reset_hours_scale=function(e,t,n){var i=document.createElement("div");i.className="dhx_scale_holder";for(var l=new Date(1980,1,1,this.config.first_hour,0,0),s=1*this.config.first_hour;s<this.config.last_hour;s++){var r=document.createElement("div");r.className="dhx_scale_hour",r.style.height=this.config.hour_size_px+"px";var a=this.xy.scale_width;this.config.left_border&&(r.className+=" dhx_scale_hour_border"),r.style.width=a+"px";var d=scheduler.templates.hour_scale(l);r.innerHTML=d,this._waiAria.hourScaleAttr(r,d),i.appendChild(r),l=this.date.add(l,1,"hour")}e.appendChild(i),this.config.scroll_hour&&(e.scrollTop=this.config.hour_size_px*(this.config.scroll_hour-this.config.first_hour))},scheduler._currentDate=function(){return scheduler.config.now_date?new Date(scheduler.config.now_date):new Date},scheduler._reset_ignores=function(){this._ignores={},this._ignores_detected=0},scheduler._process_ignores=function(e,t,n,i,l){this._reset_ignores();var s=scheduler["ignore_"+this._mode];if(s)for(var r=new Date(e),a=0;t>a;a++)s(r)&&(this._ignores_detected+=1,this._ignores[a]=!0,l&&t++),r=scheduler.date.add(r,i,n),scheduler.date[n+"_start"]&&(r=scheduler.date[n+"_start"](r))},scheduler._render_month_scale=function(e,t,n,i){function l(e){var t=scheduler._colsS.height;return void 0!==scheduler._colsS.heights[e+1]&&(t=scheduler._colsS.heights[e+1]-(scheduler._colsS.heights[e]||0)),t}var s=scheduler.date.add(t,1,"month"),r=new Date(n),a=scheduler._currentDate();this.date.date_part(a),this.date.date_part(n),i=i||Math.ceil(Math.round((s.valueOf()-n.valueOf())/864e5)/7);for(var d=[],o=0;7>=o;o++){var h=(this._cols[o]||0)-1;0===o&&this.config.left_border&&(h-=1),d[o]=h+"px"}var _=0,c=document.createElement("table");c.setAttribute("cellpadding","0"),c.setAttribute("cellspacing","0");var u=document.createElement("tbody");c.appendChild(u);var g=[];for(o=0;i>o;o++){var f=document.createElement("tr");u.appendChild(f);for(var v=Math.max(l(o)-scheduler.xy.month_head_height,0),m=0;7>m;m++){var p=document.createElement("td");f.appendChild(p);var x="";t>n?x="dhx_before":n>=s?x="dhx_after":n.valueOf()==a.valueOf()&&(x="dhx_now"),this._ignores_detected&&this._ignores[m]&&(x+=" dhx_scale_ignore"),p.className=x+" "+this.templates.month_date_class(n,a);var b="dhx_month_body",y="dhx_month_head";if(0===m&&this.config.left_border&&(b+=" dhx_month_body_border",y+=" dhx_month_head_border"),this._ignores_detected&&this._ignores[m])p.appendChild(document.createElement("div")),p.appendChild(document.createElement("div"));else{this._waiAria.monthCellAttr(p,n);var w=document.createElement("div");w.className=y,w.innerHTML=this.templates.month_day(n),p.appendChild(w);var D=document.createElement("div");D.className=b,D.style.height=v+"px",D.style.width=d[m],p.appendChild(D)}g.push(n);var E=n.getDate();(n=this.date.add(n,1,"day")).getDate()-E>1&&(n=new Date(n.getFullYear(),n.getMonth(),E+1,12,0))}scheduler._colsS.heights[o]=_,_+=l(o)}this._min_date=r,this._max_date=n,e.innerHTML="",e.appendChild(c),this._scales={};var A=e.getElementsByTagName("div");for(o=0;o<g.length;o++)this._scales[+(k=g[o])]=e=A[2*o+1];for(o=0;o<g.length;o++){var k;this.callEvent("onScaleAdd",[this._scales[+(k=g[o])],k])}return this._max_date},scheduler._reset_month_scale=function(e,t,n,i){var l=scheduler.date.add(t,1,"month"),s=scheduler._currentDate();this.date.date_part(s),this.date.date_part(n),i=i||Math.ceil(Math.round((l.valueOf()-n.valueOf())/864e5)/7);var r=Math.floor(e.clientHeight/i)-this.xy.month_head_height;return this._colsS.height=r+this.xy.month_head_height,this._colsS.heights=[],scheduler._render_month_scale(e,t,n,i)},scheduler.getLabel=function(e,t){for(var n=this.config.lightbox.sections,i=0;i<n.length;i++)if(n[i].map_to==e)for(var l=n[i].options,s=0;s<l.length;s++)if(l[s].key==t)return l[s].label;return""},scheduler.updateCollection=function(e,t){var n=scheduler.serverList(e);return!!n&&(n.splice(0,n.length),n.push.apply(n,t||[]),scheduler.callEvent("onOptionsLoad",[]),scheduler.resetLightbox(),!0)},scheduler._lame_clone=function(e,t){var n,i,l;for(t=t||[],n=0;n<t.length;n+=2)if(e===t[n])return t[n+1];if(e&&"object"==typeof e){for(l={},i=[Array,Date,Number,String,Boolean],n=0;n<i.length;n++)e instanceof i[n]&&(l=n?new i[n](e):new i[n]);for(n in t.push(e,l),e)Object.prototype.hasOwnProperty.apply(e,[n])&&(l[n]=scheduler._lame_clone(e[n],t))}return l||e},scheduler._lame_copy=function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);return e},scheduler._get_date_from_pos=function(e){var t=this._min_date.valueOf()+6e4*(e.y*this.config.time_step+24*(this._table_view?0:e.x)*60);return new Date(this._correct_shift(t))},scheduler.getActionData=function(e){var t=this._mouse_coords(e);return{date:this._get_date_from_pos(t),section:t.section}},scheduler._focus=function(e,t){if(e&&e.focus)if(this._mobile)window.setTimeout(function(){e.focus()},10);else try{t&&e.select&&e.offsetWidth&&e.select(),e.focus()}catch(e){}},scheduler._get_real_event_length=function(e,t,n){var i,l=t-e,s=n._start_correction+n._end_correction||0,r=this["ignore_"+this._mode],a=0;n.render?(a=this._get_date_index(n,e),i=this._get_date_index(n,t)):i=Math.round(l/60/60/1e3/24);for(var d=!0;i>a;){var o=scheduler.date.add(t,-n.x_step,n.x_unit);r&&r(t)&&(!d||d&&r(o))?l-=t-o:(d=!1,l-=s),t=o,i--}return l},scheduler._get_fictional_event_length=function(e,t,n,i){var l=new Date(e),s=i?-1:1;if(n._start_correction||n._end_correction){var r;r=i?60*l.getHours()+l.getMinutes()-60*(n.first_hour||0):60*(n.last_hour||0)-(60*l.getHours()+l.getMinutes());var a=60*(n.last_hour-n.first_hour),d=Math.ceil((t/6e4-r)/a);0>d&&(d=0),t+=d*(1440-a)*60*1e3}var o,h=new Date(1*e+t*s),_=this["ignore_"+this._mode],c=0;for(n.render?(c=this._get_date_index(n,l),o=this._get_date_index(n,h)):o=Math.round(t/60/60/1e3/24);o*s>=c*s;){var u=scheduler.date.add(l,n.x_step*s,n.x_unit);_&&_(l)&&(t+=(u-l)*s,o+=s),l=u,c+=s}return t},scheduler._get_section_view=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode]:this._props&&this._props[this._mode]?this._props[this._mode]:null},scheduler._get_section_property=function(){return this.matrix&&this.matrix[this._mode]?this.matrix[this._mode].y_property:this._props&&this._props[this._mode]?this._props[this._mode].map_to:null},scheduler._is_initialized=function(){var e=this.getState();return this._obj&&e.date&&e.mode},scheduler._is_lightbox_open=function(){var e=this.getState();return null!==e.lightbox_id&&void 0!==e.lightbox_id},scheduler._getClassName=function(e){if(!e)return"";var t=e.className||"";return t.baseVal&&(t=t.baseVal),t.indexOf||(t=""),t||""},scheduler.$domHelpers={getAbsoluteLeft:function(e){return this.getOffset(e).left},getAbsoluteTop:function(e){return this.getOffset(e).top},getOffsetSum:function(e){for(var t=0,n=0;e;)t+=parseInt(e.offsetTop),n+=parseInt(e.offsetLeft),e=e.offsetParent;return{top:t,left:n}},getOffsetRect:function(e){var t=e.getBoundingClientRect(),n=0,i=0;if(/Mobi/.test(navigator.userAgent)){var l=document.createElement("div");l.style.position="absolute",l.style.left="0px",l.style.top="0px",l.style.width="1px",l.style.height="1px",document.body.appendChild(l);var s=l.getBoundingClientRect();n=t.top-s.top,i=t.left-s.left,l.parentNode.removeChild(l)}else{var r=document.body,a=document.documentElement,d=window.pageYOffset||a.scrollTop||r.scrollTop,o=window.pageXOffset||a.scrollLeft||r.scrollLeft;n=t.top+d-(a.clientTop||r.clientTop||0),i=t.left+o-(a.clientLeft||r.clientLeft||0)}return{top:Math.round(n),left:Math.round(i)}},getOffset:function(e){return e.getBoundingClientRect?this.getOffsetRect(e):this.getOffsetSum(e)}},scheduler.$env={isIE:navigator.userAgent.indexOf("MSIE")>=0||navigator.userAgent.indexOf("Trident")>=0,isIE6:!window.XMLHttpRequest&&navigator.userAgent.indexOf("MSIE")>=0,isIE7:navigator.userAgent.indexOf("MSIE 7.0")>=0&&navigator.userAgent.indexOf("Trident")<0,isIE8:navigator.userAgent.indexOf("MSIE 8.0")>=0&&navigator.userAgent.indexOf("Trident")>=0,isOpera:navigator.userAgent.indexOf("Opera")>=0,isChrome:navigator.userAgent.indexOf("Chrome")>=0,isKHTML:navigator.userAgent.indexOf("Safari")>=0||navigator.userAgent.indexOf("Konqueror")>=0,isFF:navigator.userAgent.indexOf("Firefox")>=0,isIPad:navigator.userAgent.search(/iPad/gi)>=0,isEdge:-1!=navigator.userAgent.indexOf("Edge")},scheduler.$ajax={_obj:scheduler,cache:!0,method:"get",parse:function(e){return"string"!=typeof e?e:(e=e.replace(/^[\s]+/,""),window.DOMParser&&!scheduler.$env.isIE?t=(new window.DOMParser).parseFromString(e,"text/xml"):window.ActiveXObject!==window.undefined&&((t=new window.ActiveXObject("Microsoft.XMLDOM")).async="false",t.loadXML(e)),t);var t},xmltop:function(e,t,n){if(void 0===t.status||t.status<400){var i=t.responseXML?t.responseXML||t:this.parse(t.responseText||t);if(i&&null!==i.documentElement&&!i.getElementsByTagName("parsererror").length)return i.getElementsByTagName(e)[0]}return-1!==n&&this._obj.callEvent("onLoadXMLError",["Incorrect XML",arguments[1],n]),document.createElement("DIV")},xpath:function(e,t){if(t.nodeName||(t=t.responseXML||t),scheduler.$env.isIE)return t.selectNodes(e)||[];for(var n,i=[],l=(t.ownerDocument||t).evaluate(e,t,null,XPathResult.ANY_TYPE,null);n=l.iterateNext();)i.push(n);return i},query:function(e){this._call(e.method||"GET",e.url,e.data||"",e.async||!0,e.callback,null,e.headers)},get:function(e,t){this._call("GET",e,null,!0,t)},getSync:function(e){return this._call("GET",e,null,!1)},put:function(e,t,n){this._call("PUT",e,t,!0,n)},del:function(e,t,n){this._call("DELETE",e,t,!0,n)},post:function(e,t,n){1==arguments.length?t="":2!=arguments.length||"function"!=typeof t&&"function"!=typeof window[t]?t=String(t):(n=t,t=""),this._call("POST",e,t,!0,n)},postSync:function(e,t){return t=null===t?"":String(t),this._call("POST",e,t,!1)},getLong:function(e,t){this._call("GET",e,null,!0,t,{url:e})},postLong:function(e,t,n){2==arguments.length&&(n=t,t=""),this._call("POST",e,t,!0,n,{url:e,postData:t})},_call:function(e,t,n,i,l,s,r){var a=this._obj,d=window.XMLHttpRequest&&!a.$env.isIE?new XMLHttpRequest:new ActiveXObject("Microsoft.XMLHTTP"),o=null!==navigator.userAgent.match(/AppleWebKit/)&&null!==navigator.userAgent.match(/Qt/)&&null!==navigator.userAgent.match(/Safari/);if(i&&(d.onreadystatechange=function(){if(4==d.readyState||o&&3==d.readyState){if((200!=d.status||""===d.responseText)&&!a.callEvent("onAjaxError",[d]))return;window.setTimeout(function(){"function"==typeof l&&l.apply(window,[{xmlDoc:d,filePath:t}]),s&&(void 0!==s.postData?this.postLong(s.url,s.postData,l):this.getLong(s.url,l)),l=null,d=null},1)}}),"GET"!=e||this.cache||(t+=(t.indexOf("?")>=0?"&":"?")+"dhxr"+(new Date).getTime()+"=1"),d.open(e,t,i),r)for(var h in r)d.setRequestHeader(h,r[h]);else"POST"==e.toUpperCase()||"PUT"==e||"DELETE"==e?d.setRequestHeader("Content-Type","application/x-www-form-urlencoded"):"GET"==e&&(n=null);return d.setRequestHeader("X-Requested-With","XMLHttpRequest"),d.send(n),i?void 0:{xmlDoc:d,filePath:t}},urlSeparator:function(e){return-1!=e.indexOf("?")?"&":"?"}},scheduler.date={init:function(){for(var e=scheduler.locale.date.month_short,t=scheduler.locale.date.month_short_hash={},n=0;n<e.length;n++)t[e[n]]=n;for(e=scheduler.locale.date.month_full,t=scheduler.locale.date.month_full_hash={},n=0;n<e.length;n++)t[e[n]]=n},date_part:function(e){var t=new Date(e);return e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getHours()&&(e.getDate()<t.getDate()||e.getMonth()<t.getMonth()||e.getFullYear()<t.getFullYear())&&e.setTime(e.getTime()+36e5*(24-e.getHours())),e},time_part:function(e){return(e.valueOf()/1e3-60*e.getTimezoneOffset())%86400},week_start:function(e){var t=e.getDay();return scheduler.config.start_on_monday&&(0===t?t=6:t--),this.date_part(this.add(e,-1*t,"day"))},month_start:function(e){return e.setDate(1),this.date_part(e)},year_start:function(e){return e.setMonth(0),this.month_start(e)},day_start:function(e){return this.date_part(e)},_add_days:function(e,t){var n=new Date(e.valueOf());if(n.setDate(n.getDate()+t),t==Math.round(t)&&t>0){var i=(+n-+e)%864e5;if(i&&e.getTimezoneOffset()==n.getTimezoneOffset()){var l=i/36e5;n.setTime(n.getTime()+60*(24-l)*60*1e3)}}return t>=0&&!e.getHours()&&n.getHours()&&(n.getDate()<e.getDate()||n.getMonth()<e.getMonth()||n.getFullYear()<e.getFullYear())&&n.setTime(n.getTime()+36e5*(24-n.getHours())),n},add:function(e,t,n){var i=new Date(e.valueOf());switch(n){case"day":i=scheduler.date._add_days(i,t);break;case"week":i=scheduler.date._add_days(i,7*t);break;case"month":i.setMonth(i.getMonth()+t);break;case"year":i.setYear(i.getFullYear()+t);break;case"hour":i.setTime(i.getTime()+60*t*60*1e3);break;case"minute":i.setTime(i.getTime()+60*t*1e3);break;default:return scheduler.date["add_"+n](e,t,n)}return i},to_fixed:function(e){return 10>e?"0"+e:e},copy:function(e){return new Date(e.valueOf())},date_to_str:function(e,t){return e=e.replace(/%[a-zA-Z]/g,function(e){switch(e){case"%d":return'"+scheduler.date.to_fixed(date.getDate())+"';case"%m":return'"+scheduler.date.to_fixed((date.getMonth()+1))+"';case"%j":return'"+date.getDate()+"';case"%n":return'"+(date.getMonth()+1)+"';case"%y":return'"+scheduler.date.to_fixed(date.getFullYear()%100)+"';case"%Y":return'"+date.getFullYear()+"';case"%D":return'"+scheduler.locale.date.day_short[date.getDay()]+"';case"%l":return'"+scheduler.locale.date.day_full[date.getDay()]+"';case"%M":return'"+scheduler.locale.date.month_short[date.getMonth()]+"';case"%F":return'"+scheduler.locale.date.month_full[date.getMonth()]+"';case"%h":return'"+scheduler.date.to_fixed((date.getHours()+11)%12+1)+"';case"%g":return'"+((date.getHours()+11)%12+1)+"';case"%G":return'"+date.getHours()+"';case"%H":return'"+scheduler.date.to_fixed(date.getHours())+"';case"%i":return'"+scheduler.date.to_fixed(date.getMinutes())+"';case"%a":return'"+(date.getHours()>11?"pm":"am")+"';case"%A":return'"+(date.getHours()>11?"PM":"AM")+"';case"%s":return'"+scheduler.date.to_fixed(date.getSeconds())+"';case"%W":return'"+scheduler.date.to_fixed(scheduler.date.getISOWeek(date))+"';default:return e}}),t&&(e=e.replace(/date\.get/g,"date.getUTC")),new Function("date",'return "'+e+'";')},str_to_date:function(e,t){for(var n="var temp=date.match(/[a-zA-Z]+|[0-9]+/g);",i=e.match(/%[a-zA-Z]/g),l=0;l<i.length;l++)switch(i[l]){case"%j":case"%d":n+="set[2]=temp["+l+"]||1;";break;case"%n":case"%m":n+="set[1]=(temp["+l+"]||1)-1;";break;case"%y":n+="set[0]=temp["+l+"]*1+(temp["+l+"]>50?1900:2000);";break;case"%g":case"%G":case"%h":case"%H":n+="set[3]=temp["+l+"]||0;";break;case"%i":n+="set[4]=temp["+l+"]||0;";break;case"%Y":n+="set[0]=temp["+l+"]||0;";break;case"%a":case"%A":n+="set[3]=set[3]%12+((temp["+l+"]||'').toLowerCase()=='am'?0:12);";break;case"%s":n+="set[5]=temp["+l+"]||0;";break;case"%M":n+="set[1]=scheduler.locale.date.month_short_hash[temp["+l+"]]||0;";break;case"%F":n+="set[1]=scheduler.locale.date.month_full_hash[temp["+l+"]]||0;"}var s="set[0],set[1],set[2],set[3],set[4],set[5]";return t&&(s=" Date.UTC("+s+")"),new Function("date","var set=[0,0,1,0,0,0]; "+n+" return new Date("+s+");")},getISOWeek:function(e){if(!e)return!1;var t=(e=this.date_part(new Date(e))).getDay();0===t&&(t=7);var n=new Date(e.valueOf());n.setDate(e.getDate()+(4-t));var i=n.getFullYear(),l=Math.round((n.getTime()-new Date(i,0,1).getTime())/864e5);return 1+Math.floor(l/7)},getUTCISOWeek:function(e){return this.getISOWeek(this.convert_to_utc(e))},convert_to_utc:function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds())}},scheduler.locale={date:{month_full:["January","February","March","April","May","June","July","August","September","October","November","December"],month_short:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],day_full:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],day_short:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},labels:{dhx_cal_today_button:"Today",day_tab:"Day",week_tab:"Week",month_tab:"Month",new_event:"New event",icon_save:"Save",icon_cancel:"Cancel",icon_details:"Details",icon_edit:"Edit",icon_delete:"Delete",confirm_closing:"",confirm_deleting:"Event will be deleted permanently, are you sure?",section_description:"Description",section_time:"Time period",full_day:"Full day",confirm_recurring:"Do you want to edit the whole set of repeated events?",section_recurring:"Repeat event",button_recurring:"Disabled",button_recurring_open:"Enabled",button_edit_series:"Edit series",button_edit_occurrence:"Edit occurrence",agenda_tab:"Agenda",date:"Date",description:"Description",year_tab:"Year",week_agenda_tab:"Agenda",grid_tab:"Grid",drag_to_create:"Drag to create",drag_to_move:"Drag to move",message_ok:"OK",message_cancel:"Cancel",next:"Next",prev:"Previous",year:"Year",month:"Month",day:"Day",hour:"Hour",minute:"Minute"}},scheduler.config={default_date:"%j %M %Y",month_date:"%F %Y",load_date:"%Y-%m-%d",week_date:"%l",day_date:"%D, %F %j",hour_date:"%H:%i",month_day:"%d",xml_date:"%m/%d/%Y %H:%i",api_date:"%d-%m-%Y %H:%i",preserve_length:!0,time_step:5,start_on_monday:1,first_hour:0,last_hour:24,readonly:!1,drag_resize:1,drag_move:1,drag_create:1,dblclick_create:1,edit_on_create:1,details_on_create:0,resize_month_events:!1,resize_month_timed:!1,cascade_event_display:!1,cascade_event_count:4,cascade_event_margin:30,multi_day:!0,multi_day_height_limit:0,drag_lightbox:!0,preserve_scroll:!0,select:!0,server_utc:!1,touch:!0,touch_tip:!0,touch_drag:500,quick_info_detached:!0,positive_closing:!1,drag_highlight:!0,limit_drag_out:!1,icons_edit:["icon_save","icon_cancel"],icons_select:["icon_details","icon_edit","icon_delete"],buttons_left:["dhx_save_btn","dhx_cancel_btn"],buttons_right:["dhx_delete_btn"],lightbox:{sections:[{name:"description",map_to:"text",type:"textarea",focus:!0},{name:"time",height:72,type:"time",map_to:"auto"}]},highlight_displayed_event:!0,left_border:!1,ajax_error:"alert",delay_render:0,timeline_swap_resize:!0,wai_aria_attributes:!0,wai_aria_application_role:!0},scheduler.config.buttons_left.$inital=scheduler.config.buttons_left.join(),scheduler.config.buttons_right.$inital=scheduler.config.buttons_right.join(),scheduler.templates={},scheduler.init_templates=function(){var e=scheduler.locale.labels;e.dhx_save_btn=e.icon_save,e.dhx_cancel_btn=e.icon_cancel,e.dhx_delete_btn=e.icon_delete;var t=scheduler.date.date_to_str,n=scheduler.config;(function(e,t){for(var n in t)e[n]||(e[n]=t[n])})(scheduler.templates,{day_date:t(n.default_date),month_date:t(n.month_date),week_date:function(e,t){return scheduler.templates.day_date(e)+" &ndash; "+scheduler.templates.day_date(scheduler.date.add(t,-1,"day"))},day_scale_date:t(n.default_date),month_scale_date:t(n.week_date),week_scale_date:t(n.day_date),hour_scale:t(n.hour_date),time_picker:t(n.hour_date),event_date:t(n.hour_date),month_day:t(n.month_day),xml_date:scheduler.date.str_to_date(n.xml_date,n.server_utc),load_format:t(n.load_date),xml_format:t(n.xml_date,n.server_utc),api_date:scheduler.date.str_to_date(n.api_date),event_header:function(e,t,n){return scheduler.templates.event_date(e)+" - "+scheduler.templates.event_date(t)},event_text:function(e,t,n){return n.text},event_class:function(e,t,n){return""},month_date_class:function(e){return""},week_date_class:function(e){return""},event_bar_date:function(e,t,n){return scheduler.templates.event_date(e)+" "},event_bar_text:function(e,t,n){return n.text},month_events_link:function(e,t){return"<a>View more("+t+" events)</a>"},drag_marker_class:function(e,t,n){return""},drag_marker_content:function(e,t,n){return""},tooltip_date_format:scheduler.date.date_to_str("%Y-%m-%d %H:%i"),tooltip_text:function(e,t,n){return"<b>Event:</b> "+n.text+"<br/><b>Start date:</b> "+scheduler.templates.tooltip_date_format(e)+"<br/><b>End date:</b> "+scheduler.templates.tooltip_date_format(t)}}),this.callEvent("onTemplatesReady",[])},scheduler.uid=function(){return this._seed||(this._seed=(new Date).valueOf()),this._seed++},scheduler._events={},scheduler.clearAll=function(){this._events={},this._loaded={},this._edit_id=null,this._select_id=null,this._drag_id=null,this._drag_mode=null,this._drag_pos=null,this.clear_view(),this.callEvent("onClearAll",[])},scheduler.addEvent=function(e,t,n,i,l){if(!arguments.length)return this.addEventNow();var s=e;1!=arguments.length&&((s=l||{}).start_date=e,s.end_date=t,s.text=n,s.id=i),s.id=s.id||scheduler.uid(),s.text=s.text||"","string"==typeof s.start_date&&(s.start_date=this.templates.api_date(s.start_date)),"string"==typeof s.end_date&&(s.end_date=this.templates.api_date(s.end_date));var r=6e4*(this.config.event_duration||this.config.time_step);s.start_date.valueOf()==s.end_date.valueOf()&&s.end_date.setTime(s.end_date.valueOf()+r),s._timed=this.isOneDayEvent(s);var a=!this._events[s.id];return this._events[s.id]=s,this.event_updated(s),this._loading||this.callEvent(a?"onEventAdded":"onEventChanged",[s.id,s]),s.id},scheduler.deleteEvent=function(e,t){var n=this._events[e];(t||this.callEvent("onBeforeEventDelete",[e,n])&&this.callEvent("onConfirmedBeforeEventDelete",[e,n]))&&(n&&(this._select_id=null,delete this._events[e],this.event_updated(n),this._drag_id==n.id&&(this._drag_id=null,this._drag_mode=null,this._drag_pos=null)),this.callEvent("onEventDeleted",[e,n]))},scheduler.getEvent=function(e){return this._events[e]},scheduler.setEvent=function(e,t){t.id||(t.id=e),this._events[e]=t},scheduler.for_rendered=function(e,t){for(var n=this._rendered.length-1;n>=0;n--)this._rendered[n].getAttribute("event_id")==e&&t(this._rendered[n],n)},scheduler.changeEventId=function(e,t){if(e!=t){var n=this._events[e];n&&(n.id=t,this._events[t]=n,delete this._events[e]),this.for_rendered(e,function(e){e.setAttribute("event_id",t)}),this._select_id==e&&(this._select_id=t),this._edit_id==e&&(this._edit_id=t),this.callEvent("onEventIdChange",[e,t])}},function(){for(var e=["text","Text","start_date","StartDate","end_date","EndDate"],t=function(e){return function(t){return scheduler.getEvent(t)[e]}},n=function(e){return function(t,n){var i=scheduler.getEvent(t);i[e]=n,i._changed=!0,i._timed=this.isOneDayEvent(i),scheduler.event_updated(i,!0)}},i=0;i<e.length;i+=2)scheduler["getEvent"+e[i+1]]=t(e[i]),scheduler["setEvent"+e[i+1]]=n(e[i])}(),scheduler.event_updated=function(e,t){this.is_visible_events(e)?this.render_view_data():this.clear_event(e.id)},scheduler.is_visible_events=function(e){if(e.start_date.valueOf()<this._max_date.valueOf()&&this._min_date.valueOf()<e.end_date.valueOf()){var t=e.start_date.getHours(),n=e.end_date.getHours()+e.end_date.getMinutes()/60,i=this.config.last_hour,l=this.config.first_hour;return!(!this._table_view&&(n>i||l>n)&&(t>=i||l>t)&&!((e.end_date.valueOf()-e.start_date.valueOf())/36e5>24-(this.config.last_hour-this.config.first_hour)||i>t&&n>=l))}return!1},scheduler.isOneDayEvent=function(e){var t=e.end_date.getDate()-e.start_date.getDate();return t?(0>t&&(t=Math.ceil((e.end_date.valueOf()-e.start_date.valueOf())/864e5)),1==t&&!e.end_date.getHours()&&!e.end_date.getMinutes()&&(e.start_date.getHours()||e.start_date.getMinutes())):e.start_date.getMonth()==e.end_date.getMonth()&&e.start_date.getFullYear()==e.end_date.getFullYear()},scheduler.get_visible_events=function(e){var t=[];for(var n in this._events)this.is_visible_events(this._events[n])&&(!e||this._events[n]._timed)&&this.filter_event(n,this._events[n])&&t.push(this._events[n]);return t},scheduler.filter_event=function(e,t){var n=this["filter_"+this._mode];return!n||n(e,t)},scheduler._is_main_area_event=function(e){return!!e._timed},scheduler.render_view_data=function(e,t){var n=!1;if(!e){if(n=!0,this._not_render)return void(this._render_wait=!0);this._render_wait=!1,this.clear_view(),e=this.get_visible_events(!(this._table_view||this.config.multi_day))}for(var i=0,l=e.length;l>i;i++)this._recalculate_timed(e[i]);if(this.config.multi_day&&!this._table_view){var s=[],r=[];for(i=0;i<e.length;i++)this._is_main_area_event(e[i])?s.push(e[i]):r.push(e[i]);this._rendered_location=this._els.dhx_multi_day[0],this._table_view=!0,this.render_data(r,t),this._table_view=!1,this._rendered_location=this._els.dhx_cal_data[0],this._table_view=!1,this.render_data(s,t)}else this._rendered_location=this._els.dhx_cal_data[0],this.render_data(e,t);n&&this.callEvent("onDataRender",[])},scheduler._view_month_day=function(e){var t=scheduler.getActionData(e).date;scheduler.callEvent("onViewMoreClick",[t])&&scheduler.setCurrentView(t,"day")},scheduler._render_month_link=function(e){for(var t=this._rendered_location,n=this._lame_clone(e),i=e._sday;i<e._eday;i++){n._sday=i,n._eday=i+1;var l=scheduler.date,s=scheduler._min_date;s=l.add(s,n._sweek,"week"),s=l.add(s,n._sday,"day");var r=scheduler.getEvents(s,l.add(s,1,"day")).length,a=this._get_event_bar_pos(n),d=a.x2-a.x,o=document.createElement("div");o.onclick=function(e){scheduler._view_month_day(e||event)},o.className="dhx_month_link",o.style.top=a.y+"px",o.style.left=a.x+"px",o.style.width=d+"px",o.innerHTML=scheduler.templates.month_events_link(s,r),this._rendered.push(o),t.appendChild(o)}},scheduler._recalculate_timed=function(e){var t;e&&(t="object"!=typeof e?this._events[e]:e)&&(t._timed=scheduler.isOneDayEvent(t))},scheduler.attachEvent("onEventChanged",scheduler._recalculate_timed),scheduler.attachEvent("onEventAdded",scheduler._recalculate_timed),scheduler.render_data=function(e,t){e=this._pre_render_events(e,t);for(var n=0;n<e.length;n++)if(this._table_view)if("month"!=scheduler._mode)this.render_event_bar(e[n]);else{var i=scheduler.config.max_month_events;i!==1*i||e[n]._sorder<i?this.render_event_bar(e[n]):void 0!==i&&e[n]._sorder==i&&scheduler._render_month_link(e[n])}else this.render_event(e[n])},scheduler._get_first_visible_cell=function(e){for(var t=0;t<e.length;t++)if(-1==(e[t].className||"").indexOf("dhx_scale_ignore"))return e[t];return e[0]},scheduler._pre_render_events=function(e,t){var n=this.xy.bar_height,i=this._colsS.heights,l=this._colsS.heights=[0,0,0,0,0,0,0],s=this._els.dhx_cal_data[0];if(e=this._table_view?this._pre_render_events_table(e,t):this._pre_render_events_line(e,t),this._table_view)if(t)this._colsS.heights=i;else{var r=s.firstChild;if(r.rows){for(var a=0;a<r.rows.length;a++){l[a]++;var d=r.rows[a].cells,o=this._colsS.height-this.xy.month_head_height;if(l[a]*n>o){var h=o;1*this.config.max_month_events!==this.config.max_month_events||l[a]<=this.config.max_month_events?h=l[a]*n:(this.config.max_month_events+1)*n>o&&(h=(this.config.max_month_events+1)*n);for(var _=0;_<d.length;_++)d[_].childNodes[1].style.height=h+"px"}l[a]=(l[a-1]||0)+scheduler._get_first_visible_cell(d).offsetHeight}if(l.unshift(0),r.parentNode.offsetHeight<r.parentNode.scrollHeight&&!scheduler._colsS.scroll_fix&&scheduler.xy.scroll_width){var c=scheduler._colsS,u=c[c.col_length],g=c.heights.slice();u-=scheduler.xy.scroll_width||0,this._calc_scale_sizes(u,this._min_date,this._max_date),scheduler._colsS.heights=g,this.set_xy(this._els.dhx_cal_header[0],u,this.xy.scale_height),scheduler._render_scales(this._els.dhx_cal_header[0]),scheduler._render_month_scale(this._els.dhx_cal_data[0],this._get_timeunit_start(),this._min_date),c.scroll_fix=!0}}else if(e.length||"visible"!=this._els.dhx_multi_day[0].style.visibility||(l[0]=-1),e.length||-1==l[0]){var f=(l[0]+1)*n+1,v=f,m=f+"px";this.config.multi_day_height_limit&&(m=(v=Math.min(f,this.config.multi_day_height_limit))+"px"),s.style.top=this._els.dhx_cal_navline[0].offsetHeight+this._els.dhx_cal_header[0].offsetHeight+v+"px",s.style.height=this._obj.offsetHeight-parseInt(s.style.top,10)-(this.xy.margin_top||0)+"px";var p=this._els.dhx_multi_day[0];p.style.height=m,p.style.visibility=-1==l[0]?"hidden":"visible";var x=this._els.dhx_multi_day[1];x.style.height=m,x.style.visibility=-1==l[0]?"hidden":"visible",x.className=l[0]?"dhx_multi_day_icon":"dhx_multi_day_icon_small",this._dy_shift=(l[0]+1)*n,this.config.multi_day_height_limit&&(this._dy_shift=Math.min(this.config.multi_day_height_limit,this._dy_shift)),l[0]=0,v!=f&&(s.style.top=parseInt(s.style.top)+2+"px",p.style.overflowY="auto",x.style.position="fixed",x.style.top="",x.style.left="")}}return e},scheduler._get_event_sday=function(e){var t=this.date.day_start(new Date(e.start_date));return Math.round((t.valueOf()-this._min_date.valueOf())/864e5)},scheduler._get_event_mapped_end_date=function(e){var t=e.end_date;if(this.config.separate_short_events){var n=(e.end_date-e.start_date)/6e4;n<this._min_mapped_duration&&(t=this.date.add(t,this._min_mapped_duration-n,"minute"))}return t},scheduler._pre_render_events_line=function(e,t){e.sort(function(e,t){return e.start_date.valueOf()==t.start_date.valueOf()?e.id>t.id?1:-1:e.start_date>t.start_date?1:-1});var n=[],i=[];this._min_mapped_duration=Math.ceil(60*this.xy.min_event_height/this.config.hour_size_px);for(var l=0;l<e.length;l++){var s=e[l],r=s.end_date,a=s.start_date.getHours(),d=r.getHours();if(s._sday=this._get_event_sday(s),this._ignores[s._sday])e.splice(l,1),l--;else{if(n[s._sday]||(n[s._sday]=[]),!t){s._inner=!1;for(var o=n[s._sday];o.length&&this._get_event_mapped_end_date(u=o[o.length-1]).valueOf()<=s.start_date.valueOf();)o.splice(o.length-1,1);for(var h=o.length,_=!1,c=0;c<o.length;c++){var u;if(this._get_event_mapped_end_date(u=o[c]).valueOf()<=s.start_date.valueOf()){_=!0,s._sorder=u._sorder,h=c,s._inner=!0;break}}if(o.length&&(o[o.length-1]._inner=!0),!_)if(o.length)if(o.length<=o[o.length-1]._sorder){if(o[o.length-1]._sorder)for(c=0;c<o.length;c++){for(var g=!1,f=0;f<o.length;f++)if(o[f]._sorder==c){g=!0;break}if(!g){s._sorder=c;break}}else s._sorder=0;s._inner=!0}else{var v=o[0]._sorder;for(c=1;c<o.length;c++)o[c]._sorder>v&&(v=o[c]._sorder);s._sorder=v+1,s._inner=!1}else s._sorder=0;o.splice(h,h==o.length?0:1,s),o.length>(o.max_count||0)?(o.max_count=o.length,s._count=o.length):s._count=s._count?s._count:1}(a<this.config.first_hour||d>=this.config.last_hour)&&(i.push(s),e[l]=s=this._copy_event(s),a<this.config.first_hour&&(s.start_date.setHours(this.config.first_hour),s.start_date.setMinutes(0)),d>=this.config.last_hour&&(s.end_date.setMinutes(0),s.end_date.setHours(this.config.last_hour)),s.start_date>s.end_date||a==this.config.last_hour)&&(e.splice(l,1),l--)}}if(!t){for(l=0;l<e.length;l++)e[l]._count=n[e[l]._sday].max_count;for(l=0;l<i.length;l++)i[l]._count=n[i[l]._sday].max_count}return e},scheduler._time_order=function(e){e.sort(function(e,t){return e.start_date.valueOf()==t.start_date.valueOf()?e._timed&&!t._timed?1:!e._timed&&t._timed?-1:e.id>t.id?1:-1:e.start_date>t.start_date?1:-1})},scheduler._pre_render_events_table=function(e,t){this._time_order(e);for(var n,i=[],l=[[],[],[],[],[],[],[]],s=this._colsS.heights,r=this._cols.length,a={},d=0;d<e.length;d++){var o=e[d],h=o.id;a[h]||(a[h]={first_chunk:!0,last_chunk:!0});var _=a[h],c=n||o.start_date,u=o.end_date;c<this._min_date&&(_.first_chunk=!1,c=this._min_date),u>this._max_date&&(_.last_chunk=!1,u=this._max_date);var g=this.locate_holder_day(c,!1,o);if(o._sday=g%r,!this._ignores[o._sday]||!o._timed){var f=this.locate_holder_day(u,!0,o)||r;o._eday=f%r||r,o._length=f-g,o._sweek=Math.floor((this._correct_shift(c.valueOf(),1)-this._min_date.valueOf())/(864e5*r));var v,m=l[o._sweek];for(v=0;v<m.length&&!(m[v]._eday<=o._sday);v++);if(o._sorder&&t||(o._sorder=v),o._sday+o._length<=r)n=null,i.push(o),m[v]=o,s[o._sweek]=m.length-1,o._first_chunk=_.first_chunk,o._last_chunk=_.last_chunk;else{var p=this._copy_event(o);p.id=o.id,p._length=r-o._sday,p._eday=r,p._sday=o._sday,p._sweek=o._sweek,p._sorder=o._sorder,p.end_date=this.date.add(c,p._length,"day"),p._first_chunk=_.first_chunk,_.first_chunk&&(_.first_chunk=!1),i.push(p),m[v]=p,n=p.end_date,s[o._sweek]=m.length-1,d--}}}return i},scheduler._copy_dummy=function(){var e=new Date(this.start_date),t=new Date(this.end_date);this.start_date=e,this.end_date=t},scheduler._copy_event=function(e){return this._copy_dummy.prototype=e,new this._copy_dummy},scheduler._rendered=[],scheduler.clear_view=function(){for(var e=0;e<this._rendered.length;e++){var t=this._rendered[e];t.parentNode&&t.parentNode.removeChild(t)}this._rendered=[]},scheduler.updateEvent=function(e){var t=this.getEvent(e);this.clear_event(e),t&&this.is_visible_events(t)&&this.filter_event(e,t)&&(this._table_view||this.config.multi_day||t._timed)&&(this.config.update_render?this.render_view_data():"month"!=this.getState().mode||this.getState().drag_id||this.isOneDayEvent(t)?this.render_view_data([t],!0):this.render_view_data())},scheduler.clear_event=function(e){this.for_rendered(e,function(e,t){e.parentNode&&e.parentNode.removeChild(e),scheduler._rendered.splice(t,1)})},scheduler._y_from_date=function(e){var t=60*e.getHours()+e.getMinutes();return Math.round((60*t*1e3-60*this.config.first_hour*60*1e3)*this.config.hour_size_px/36e5)%(24*this.config.hour_size_px)},scheduler._calc_event_y=function(e,t){t=t||0;var n=60*e.start_date.getHours()+e.start_date.getMinutes(),i=60*e.end_date.getHours()+e.end_date.getMinutes()||60*scheduler.config.last_hour;return{top:this._y_from_date(e.start_date),height:Math.max(t,(i-n)*this.config.hour_size_px/60)}},scheduler.render_event=function(e){var t=scheduler.xy.menu_width,n=this.config.use_select_menu_space?0:t;if(!(e._sday<0)){var i=scheduler.locate_holder(e._sday);if(i){var l=this._calc_event_y(e,scheduler.xy.min_event_height),s=l.top,r=l.height,a=e._count||1,d=e._sorder||0,o=Math.floor((i.clientWidth-n)/a),h=d*o+1;if(e._inner||(o*=a-d),this.config.cascade_event_display){var _=this.config.cascade_event_count,c=this.config.cascade_event_margin;h=d%_*c,o=Math.floor(i.clientWidth-n-h-(e._inner?(a-d-1)%_*c/2:0))}var u=this._render_v_bar(e,n+h,s,o,r,e._text_style,scheduler.templates.event_header(e.start_date,e.end_date,e),scheduler.templates.event_text(e.start_date,e.end_date,e));if(this._waiAria.eventAttr(e,u),this._rendered.push(u),i.appendChild(u),h=h+parseInt(i.style.left,10)+n,this._edit_id==e.id){u.style.zIndex=1,o=Math.max(o-4,scheduler.xy.editor_width),(u=document.createElement("div")).setAttribute("event_id",e.id),this._waiAria.eventAttr(e,u),this.set_xy(u,o,r-20,h,s+(scheduler.xy.event_header_height||14)),u.className="dhx_cal_event dhx_cal_editor",e.color&&(u.style.backgroundColor=e.color);var g=scheduler.templates.event_class(e.start_date,e.end_date,e);g&&(u.className+=" "+g);var f=document.createElement("div");this.set_xy(f,o-6,r-26),f.style.cssText+=";margin:2px 2px 2px 2px;overflow:hidden;",u.appendChild(f),this._els.dhx_cal_data[0].appendChild(u),this._rendered.push(u),f.innerHTML="<textarea class='dhx_cal_editor'>"+e.text+"</textarea>",this._quirks7&&(f.firstChild.style.height=r-12+"px"),this._editor=f.firstChild,this._editor.onkeydown=function(e){if((e||event).shiftKey)return!0;var t=(e||event).keyCode;t==scheduler.keys.edit_save&&scheduler.editStop(!0),t==scheduler.keys.edit_cancel&&scheduler.editStop(!1),(t==scheduler.keys.edit_save||t==scheduler.keys.edit_cancel)&&e.preventDefault&&e.preventDefault()},this._editor.onselectstart=function(e){return(e||event).cancelBubble=!0,!0},scheduler._focus(f.firstChild,!0),this._els.dhx_cal_data[0].scrollLeft=0}if(0!==this.xy.menu_width&&this._select_id==e.id){this.config.cascade_event_display&&this._drag_mode&&(u.style.zIndex=1);for(var v,m=this.config["icons_"+(this._edit_id==e.id?"edit":"select")],p="",x=e.color?"background-color: "+e.color+";":"",b=e.textColor?"color: "+e.textColor+";":"",y=0;y<m.length;y++)v=this._waiAria.eventMenuAttrString(m[y]),p+="<div class='dhx_menu_icon "+m[y]+"' style='"+x+b+"' title='"+this.locale.labels[m[y]]+"'"+v+"></div>";var w=this._render_v_bar(e,h-t+1,s,t,20*m.length+26-2,"","<div style='"+x+b+"' class='dhx_menu_head'></div>",p,!0);w.style.left=h-t+1,this._els.dhx_cal_data[0].appendChild(w),this._rendered.push(w)}this.config.drag_highlight&&this._drag_id==e.id&&this.highlightEventPosition(e)}}},scheduler._render_v_bar=function(e,t,n,i,l,s,r,a,d){var o=document.createElement("div"),h=e.id,_=d?"dhx_cal_event dhx_cal_select_menu":"dhx_cal_event",c=scheduler.getState();c.drag_id==e.id&&(_+=" dhx_cal_event_drag"),c.select_id==e.id&&(_+=" dhx_cal_event_selected");var u=scheduler.templates.event_class(e.start_date,e.end_date,e);u&&(_=_+" "+u),this.config.cascade_event_display&&(_+=" dhx_cal_event_cascade");var g=e.color?"background-color:"+e.color+";":"",f=e.textColor?"color:"+e.textColor+";":"",v=scheduler._border_box_bvents(),m=i-2,p=v?m:i-6,x=v?m:i-(this._quirks?4:14),b=v?m-2:i-8,y=v?l-this.xy.event_header_height-1:l-(this._quirks?20:30)+1;o.innerHTML='<div event_id="'+h+'" class="'+_+'" style="position:absolute; top:'+n+"px; left:"+t+"px; width:"+(v?m:i-4)+"px; height:"+l+"px;"+(s||"")+'"></div>';var w=o.cloneNode(!0).firstChild;if(!d&&scheduler.renderEvent(w,e,i,l,r,a))return w;w=o.firstChild;var D='<div class="dhx_event_move dhx_header" style=" width:'+p+"px;"+g+'" >&nbsp;</div>';D+='<div class="dhx_event_move dhx_title" style="'+g+f+'">'+r+"</div>",D+='<div class="dhx_body" style=" width:'+x+"px; height:"+y+"px;"+g+f+'">'+a+"</div>";var E="dhx_event_resize dhx_footer";return d&&(E="dhx_resize_denied "+E),w.innerHTML=D+='<div class="'+E+'" style=" width:'+b+"px;"+(d?" margin-top:-1px;":"")+g+f+'" ></div>',w},scheduler.renderEvent=function(){return!1},scheduler.locate_holder=function(e){return"day"==this._mode?this._els.dhx_cal_data[0].firstChild:this._els.dhx_cal_data[0].childNodes[e]},scheduler.locate_holder_day=function(e,t){var n=Math.floor((this._correct_shift(e,1)-this._min_date)/864e5);return t&&this.date.time_part(e)&&n++,n},scheduler._get_dnd_order=function(e,t,n){if(!this._drag_event)return e;this._drag_event._orig_sorder?e=this._drag_event._orig_sorder:this._drag_event._orig_sorder=e;for(var i=t*e;i+t>n;)e--,i-=t;return Math.max(e,0)},scheduler._get_event_bar_pos=function(e){var t=this._colsS[e._sday],n=this._colsS[e._eday];n==t&&(n=this._colsS[e._eday+1]);var i=this.xy.bar_height,l=e._sorder;return e.id==this._drag_id&&(l=scheduler._get_dnd_order(l,i,this._colsS.heights[e._sweek+1]-this._colsS.heights[e._sweek]-this.xy.month_head_height)),{x:t,x2:n,y:this._colsS.heights[e._sweek]+(this._colsS.height?this.xy.month_scale_height+2:2)+l*i}},scheduler.render_event_bar=function(e){var t=this._rendered_location,n=this._get_event_bar_pos(e),i=n.y,l=n.x,s=n.x2,r="";if(s){var a=scheduler.config.resize_month_events&&"month"==this._mode&&(!e._timed||scheduler.config.resize_month_timed),d=document.createElement("div"),o=e.hasOwnProperty("_first_chunk")&&e._first_chunk,h=e.hasOwnProperty("_last_chunk")&&e._last_chunk,_="dhx_cal_event_clear";(!e._timed||a)&&(_="dhx_cal_event_line"),o&&(_+=" dhx_cal_event_line_start"),h&&(_+=" dhx_cal_event_line_end"),a&&(e._timed||o)&&(r+="<div class='dhx_event_resize dhx_event_resize_start'></div>"),a&&(e._timed||h)&&(r+="<div class='dhx_event_resize dhx_event_resize_end'></div>");var c=scheduler.templates.event_class(e.start_date,e.end_date,e);c&&(_+=" "+c);var u=["position:absolute","top:"+i+"px","left:"+l+"px","width:"+(s-l-15)+"px",e.textColor?"color:"+e.textColor+";":"",e.color?"background:"+e.color+";":"",e._text_style||""].join(";"),g="<div event_id='"+e.id+"' class='"+_+"' style='"+u+"'"+this._waiAria.eventBarAttrString(e)+">";a&&(g+=r),"month"==scheduler.getState().mode&&(e=scheduler.getEvent(e.id)),e._timed&&(g+=scheduler.templates.event_bar_date(e.start_date,e.end_date,e)),g+=scheduler.templates.event_bar_text(e.start_date,e.end_date,e)+"</div>",d.innerHTML=g+="</div>",this._rendered.push(d.firstChild),t.appendChild(d.firstChild)}},scheduler._locate_event=function(e){for(var t=null;e&&!t&&e.getAttribute;)t=e.getAttribute("event_id"),e=e.parentNode;return t},scheduler._locate_css=function(e,t,n){void 0===n&&(n=!0);for(var i=e.target||e.srcElement,l="";i;){if(l=scheduler._getClassName(i)){var s=l.indexOf(t);if(s>=0){if(!n)return i;var r=0===s||!scheduler._trim(l.charAt(s-1)),a=s+t.length>=l.length||!scheduler._trim(l.charAt(s+t.length));if(r&&a)return i}}i=i.parentNode}return null},scheduler.edit=function(e){this._edit_id!=e&&(this.editStop(!1,e),this._edit_id=e,this.updateEvent(e))},scheduler.editStop=function(e,t){if(!t||this._edit_id!=t){var n=this.getEvent(this._edit_id);n&&(e&&(n.text=this._editor.value),this._edit_id=null,this._editor=null,this.updateEvent(n.id),this._edit_stop_event(n,e))}},scheduler._edit_stop_event=function(e,t){this._new_event?(t?this.callEvent("onEventAdded",[e.id,e]):e&&this.deleteEvent(e.id,!0),this._new_event=null):t&&this.callEvent("onEventChanged",[e.id,e])},scheduler.getEvents=function(e,t){var n=[];for(var i in this._events){var l=this._events[i];l&&(!e&&!t||l.start_date<t&&l.end_date>e)&&n.push(l)}return n},scheduler.getRenderedEvent=function(e){if(e){for(var t=scheduler._rendered,n=0;n<t.length;n++){var i=t[n];if(i.getAttribute("event_id")==e)return i}return null}},scheduler.showEvent=function(e,t){var n="number"==typeof e||"string"==typeof e?scheduler.getEvent(e):e;if(t=t||scheduler._mode,n&&(!this.checkEvent("onBeforeEventDisplay")||this.callEvent("onBeforeEventDisplay",[n,t]))){var i=scheduler.config.scroll_hour;scheduler.config.scroll_hour=n.start_date.getHours();var l=scheduler.config.preserve_scroll;scheduler.config.preserve_scroll=!1;var s=n.color,r=n.textColor;if(scheduler.config.highlight_displayed_event&&(n.color=scheduler.config.displayed_event_color,n.textColor=scheduler.config.displayed_event_text_color),scheduler.setCurrentView(new Date(n.start_date),t),n.color=s,n.textColor=r,scheduler.config.scroll_hour=i,scheduler.config.preserve_scroll=l,scheduler.matrix&&scheduler.matrix[t]){var a=scheduler.getRenderedEvent(n.id);a&&(scheduler._els.dhx_cal_data[0].scrollTop=scheduler.$domHelpers.getAbsoluteTop(a)-scheduler.$domHelpers.getAbsoluteTop(scheduler._els.dhx_cal_data[0])-20)}scheduler.callEvent("onAfterEventDisplay",[n,t])}},scheduler._append_drag_marker=function(e){if(!e.parentNode){var t=scheduler._els.dhx_cal_data[0].lastChild,n=scheduler._getClassName(t);n.indexOf("dhx_scale_holder")<0&&t.previousSibling&&(t=t.previousSibling),n=scheduler._getClassName(t),t&&0===n.indexOf("dhx_scale_holder")&&t.appendChild(e)}},scheduler._update_marker_position=function(e,t){var n=scheduler._calc_event_y(t,0);e.style.top=n.top+"px",e.style.height=n.height+"px"},scheduler.highlightEventPosition=function(e){var t=document.createElement("div");t.setAttribute("event_id",e.id),this._rendered.push(t),this._update_marker_position(t,e);var n=this.templates.drag_marker_class(e.start_date,e.end_date,e),i=this.templates.drag_marker_content(e.start_date,e.end_date,e);t.className="dhx_drag_marker",n&&(t.className+=" "+n),i&&(t.innerHTML=i),this._append_drag_marker(t)},scheduler._loaded={},scheduler._load=function(e,t){if(e=e||this._load_url){var n;if(e+=(-1==e.indexOf("?")?"?":"&")+"timeshift="+(new Date).getTimezoneOffset(),this.config.prevent_cache&&(e+="&uid="+this.uid()),t=t||this._date,this._load_mode){var i=this.templates.load_format;for(t=this.date[this._load_mode+"_start"](new Date(t.valueOf()));t>this._min_date;)t=this.date.add(t,-1,this._load_mode);n=t;for(var l=!0;n<this._max_date;)n=this.date.add(n,1,this._load_mode),this._loaded[i(t)]&&l?t=this.date.add(t,1,this._load_mode):l=!1;var s=n;do{s=this.date.add(n=s,-1,this._load_mode)}while(s>t&&this._loaded[i(s)]);if(t>=n)return!1;for(scheduler.$ajax.get(e+"&from="+i(t)+"&to="+i(n),function(e){scheduler.on_load(e)});n>t;)this._loaded[i(t)]=!0,t=this.date.add(t,1,this._load_mode)}else scheduler.$ajax.get(e,function(e){scheduler.on_load(e)});return this.callEvent("onXLS",[]),!0}},scheduler.on_load=function(e){var t,n=!1;if(this._process&&"xml"!=this._process)try{t=this[this._process].parse(e.xmlDoc.responseText)}catch(e){n=!0}else(t=this._magic_parser(e))||(n=!0);(n||e.xmlDoc.status&&e.xmlDoc.status>=400)&&(this.callEvent("onLoadError",[e.xmlDoc]),t=[]),scheduler._process_loading(t),this.callEvent("onXLE",[])},scheduler._process_loading=function(e){this._loading=!0,this._not_render=!0;for(var t=0;t<e.length;t++)this.callEvent("onEventLoading",[e[t]])&&this.addEvent(e[t]);this._not_render=!1,this._render_wait&&this.render_view_data(),this._loading=!1,this._after_call&&this._after_call(),this._after_call=null},scheduler._init_event=function(e){e.text=e.text||e._tagvalue||"",e.start_date=scheduler._init_date(e.start_date),e.end_date=scheduler._init_date(e.end_date)},scheduler._init_date=function(e){return e?"string"==typeof e?scheduler.templates.xml_date(e):new Date(e):null},scheduler.json={},scheduler.json.parse=function(data){"string"==typeof data&&(window.JSON?scheduler._temp=JSON.parse(data):scheduler._temp=eval("("+data+")"),data=scheduler._temp?scheduler._temp.data||scheduler._temp.d||scheduler._temp:[]),data.dhx_security&&(dhtmlx.security_key=data.dhx_security);var collections=scheduler._temp&&scheduler._temp.collections?scheduler._temp.collections:{},collections_loaded=!1;for(var key in collections)if(collections.hasOwnProperty(key)){collections_loaded=!0;var collection=collections[key],arr=scheduler.serverList[key];if(!arr)continue;arr.splice(0,arr.length);for(var j=0;j<collection.length;j++){var option=collection[j],obj={key:option.value,label:option.label};for(var option_key in option)if(option.hasOwnProperty(option_key)){if("value"==option_key||"label"==option_key)continue;obj[option_key]=option[option_key]}arr.push(obj)}}collections_loaded&&scheduler.callEvent("onOptionsLoad",[]);for(var evs=[],i=0;i<data.length;i++){var event=data[i];scheduler._init_event(event),evs.push(event)}return evs},scheduler.parse=function(e,t){this._process=t,this.on_load({xmlDoc:{responseText:e}})},scheduler.load=function(e,t){"string"==typeof t&&(this._process=t,t=arguments[2]),this._load_url=e,this._after_call=t,this._load(e,this._date)},scheduler.setLoadMode=function(e){"all"==e&&(e=""),this._load_mode=e},scheduler.serverList=function(e,t){return t?(this.serverList[e]=t.slice(0),this.serverList[e]):(this.serverList[e]=this.serverList[e]||[],this.serverList[e])},scheduler._userdata={},scheduler._magic_parser=function(e){var t;if(e.getXMLTopNode||(e=scheduler.$ajax.parse(e)),"data"!=(t=scheduler.$ajax.xmltop("data",e.xmlDoc)).tagName)return null;var n=t.getAttribute("dhx_security");n&&(dhtmlx.security_key=n);for(var i=scheduler.$ajax.xpath("//coll_options",e.xmlDoc),l=0;l<i.length;l++){var s=i[l].getAttribute("for"),r=this.serverList[s];if(r){r.splice(0,r.length);for(var a=scheduler.$ajax.xpath(".//item",i[l]),d=0;d<a.length;d++){for(var o=a[d].attributes,h={key:a[d].getAttribute("value"),label:a[d].getAttribute("label")},_=0;_<o.length;_++){var c=o[_];"value"!=c.nodeName&&"label"!=c.nodeName&&(h[c.nodeName]=c.nodeValue)}r.push(h)}}}i.length&&scheduler.callEvent("onOptionsLoad",[]);var u=scheduler.$ajax.xpath("//userdata",e.xmlDoc);for(l=0;l<u.length;l++){var g=this._xmlNodeToJSON(u[l]);this._userdata[g.name]=g.text}var f=[];for(t=scheduler.$ajax.xpath("//event",e.xmlDoc),l=0;l<t.length;l++){var v=f[l]=this._xmlNodeToJSON(t[l]);scheduler._init_event(v)}return f},scheduler._xmlNodeToJSON=function(e){for(var t={},n=0;n<e.attributes.length;n++)t[e.attributes[n].name]=e.attributes[n].value;for(n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];1==i.nodeType&&(t[i.tagName]=i.firstChild?i.firstChild.nodeValue:"")}return t.text||(t.text=e.firstChild?e.firstChild.nodeValue:""),t},scheduler.attachEvent("onXLS",function(){var e;!0===this.config.show_loading&&((e=this.config.show_loading=document.createElement("div")).className="dhx_loading",e.style.left=Math.round((this._x-128)/2)+"px",e.style.top=Math.round((this._y-15)/2)+"px",this._obj.appendChild(e))}),scheduler.attachEvent("onXLE",function(){var e=this.config.show_loading;e&&"object"==typeof e&&(this._obj.removeChild(e),this.config.show_loading=!0)}),scheduler.ical={parse:function(e){var t=e.match(RegExp(this.c_start+"[^\f]*"+this.c_end,""));if(t.length){t[0]=t[0].replace(/[\r\n]+ /g,""),t[0]=t[0].replace(/[\r\n]+(?=[a-z \t])/g," "),t[0]=t[0].replace(/\;[^:\r\n]*:/g,":");for(var n,i=[],l=RegExp("(?:"+this.e_start+")([^\f]*?)(?:"+this.e_end+")","g");null!==(n=l.exec(t));){for(var s,r={},a=/[^\r\n]+[\r\n]+/g;null!==(s=a.exec(n[1]));)this.parse_param(s.toString(),r);r.uid&&!r.id&&(r.id=r.uid),i.push(r)}return i}},parse_param:function(e,t){var n=e.indexOf(":");if(-1!=n){var i=e.substr(0,n).toLowerCase(),l=e.substr(n+1).replace(/\\\,/g,",").replace(/[\r\n]+$/,"");"summary"==i?i="text":"dtstart"==i?(i="start_date",l=this.parse_date(l,0,0)):"dtend"==i&&(i="end_date",l=this.parse_date(l,0,0)),t[i]=l}},parse_date:function(e,t,n){var i=e.split("T");i[1]&&(t=i[1].substr(0,2),n=i[1].substr(2,2));var l=i[0].substr(0,4),s=parseInt(i[0].substr(4,2),10)-1,r=i[0].substr(6,2);return scheduler.config.server_utc&&!i[1]?new Date(Date.UTC(l,s,r,t,n)):new Date(l,s,r,t,n)},c_start:"BEGIN:VCALENDAR",e_start:"BEGIN:VEVENT",e_end:"END:VEVENT",c_end:"END:VCALENDAR"},scheduler._lightbox_controls={},scheduler.formSection=function(e){for(var t=this.config.lightbox.sections,n=0;n<t.length&&t[n].name!=e;n++);var i=t[n];scheduler._lightbox||scheduler.getLightbox();var l=document.getElementById(i.id),s=l.nextSibling,r={section:i,header:l,node:s,getValue:function(e){return scheduler.form_blocks[i.type].get_value(s,e||{},i)},setValue:function(e,t){return scheduler.form_blocks[i.type].set_value(s,e,t||{},i)}},a=scheduler._lightbox_controls["get_"+i.type+"_control"];return a?a(r):r},scheduler._lightbox_controls.get_template_control=function(e){return e.control=e.node,e},scheduler._lightbox_controls.get_select_control=function(e){return e.control=e.node.getElementsByTagName("select")[0],e},scheduler._lightbox_controls.get_textarea_control=function(e){return e.control=e.node.getElementsByTagName("textarea")[0],e},scheduler._lightbox_controls.get_time_control=function(e){return e.control=e.node.getElementsByTagName("select"),e},scheduler._lightbox_controls.defaults={template:{height:30},textarea:{height:200},select:{height:23},time:{height:20}},scheduler.form_blocks={template:{render:function(e){var t=scheduler._lightbox_controls.defaults.template;return"<div class='dhx_cal_ltext dhx_cal_template' style='height:"+(e.height||(t?t.height:30)||30)+"px;'></div>"},set_value:function(e,t,n,i){e.innerHTML=t||""},get_value:function(e,t,n){return e.innerHTML||""},focus:function(e){}},textarea:{render:function(e){var t=scheduler._lightbox_controls.defaults.textarea;return"<div class='dhx_cal_ltext' style='height:"+(e.height||(t?t.height:200)||"130")+"px;'><textarea></textarea></div>"},set_value:function(e,t,n){scheduler.form_blocks.textarea._get_input(e).value=t||""},get_value:function(e,t){return scheduler.form_blocks.textarea._get_input(e).value},focus:function(e){var t=scheduler.form_blocks.textarea._get_input(e);scheduler._focus(t,!0)},_get_input:function(e){return e.getElementsByTagName("textarea")[0]}},select:{render:function(e){for(var t=scheduler._lightbox_controls.defaults.select,n="<div class='dhx_cal_ltext' style='height:"+(e.height||(t?t.height:23)||"23")+"px;'><select style='width:100%;'>",i=0;i<e.options.length;i++)n+="<option value='"+e.options[i].key+"'>"+e.options[i].label+"</option>";return n+"</select></div>"},set_value:function(e,t,n,i){var l=e.firstChild;!l._dhx_onchange&&i.onchange&&(l.onchange=i.onchange,l._dhx_onchange=!0),void 0===t&&(t=(l.options[0]||{}).value),l.value=t||""},get_value:function(e,t){return e.firstChild.value},focus:function(e){scheduler._focus(e.firstChild,!0)}},time:{render:function(e){e.time_format||(e.time_format=["%H:%i","%d","%m","%Y"]),e._time_format_order={};var t=e.time_format,n=scheduler.config,i=scheduler.date.date_part(scheduler._currentDate()),l=1440,s=0;scheduler.config.limit_time_select&&(l=60*n.last_hour+1,s=60*n.first_hour,i.setHours(n.first_hour));for(var r="",a=0;a<t.length;a++){var d=t[a];a>0&&(r+=" ");var o="",h="";switch(d){case"%Y":o="dhx_lightbox_year_select",e._time_format_order[3]=a;for(var _=i.getFullYear()-5,c=0;10>c;c++)h+="<option value='"+(_+c)+"'>"+(_+c)+"</option>";break;case"%m":for(o="dhx_lightbox_month_select",e._time_format_order[2]=a,c=0;12>c;c++)h+="<option value='"+c+"'>"+this.locale.date.month_full[c]+"</option>";break;case"%d":for(o="dhx_lightbox_day_select",e._time_format_order[1]=a,c=1;32>c;c++)h+="<option value='"+c+"'>"+c+"</option>";break;case"%H:%i":o="dhx_lightbox_time_select",e._time_format_order[0]=a,c=s;var u=i.getDate();for(e._time_values=[];l>c;)h+="<option value='"+c+"'>"+this.templates.time_picker(i)+"</option>",e._time_values.push(c),i.setTime(i.valueOf()+60*this.config.time_step*1e3),c=24*(i.getDate()!=u?1:0)*60+60*i.getHours()+i.getMinutes()}if(h){var g=scheduler._waiAria.lightboxSelectAttrString(d);r+="<select class='"+o+"' "+(e.readonly?"disabled='disabled'":"")+g+">"+h+"</select> "}}var f=scheduler._lightbox_controls.defaults.select;return"<div style='height:"+((f?f.height:23)||30)+"px;padding-top:0px;font-size:inherit;' class='dhx_section_time'>"+r+"<span style='font-weight:normal; font-size:10pt;'> &nbsp;&ndash;&nbsp; </span>"+r+"</div>"},set_value:function(e,t,n,i){function l(e,t,n){for(var l=i._time_values,s=60*n.getHours()+n.getMinutes(),r=s,a=!1,d=0;d<l.length;d++){var h=l[d];if(h===s){a=!0;break}s>h&&(r=h)}e[t+o[0]].value=a?s:r,a||r||(e[t+o[0]].selectedIndex=-1),e[t+o[1]].value=n.getDate(),e[t+o[2]].value=n.getMonth(),e[t+o[3]].value=n.getFullYear()}var s,r,a=scheduler.config,d=e.getElementsByTagName("select"),o=i._time_format_order;if(a.full_day){if(!e._full_day){var h="<label class='dhx_fullday'><input type='checkbox' name='full_day' value='true'> "+scheduler.locale.labels.full_day+"&nbsp;</label></input>";scheduler.config.wide_form||(h=e.previousSibling.innerHTML+h),e.previousSibling.innerHTML=h,e._full_day=!0}var _=e.previousSibling.getElementsByTagName("input")[0];_.checked=0===scheduler.date.time_part(n.start_date)&&0===scheduler.date.time_part(n.end_date),d[o[0]].disabled=_.checked,d[o[0]+d.length/2].disabled=_.checked,_.onclick=function(){if(_.checked){var t={};scheduler.form_blocks.time.get_value(e,t,i),s=scheduler.date.date_part(t.start_date),(+(r=scheduler.date.date_part(t.end_date))==+s||+r>=+s&&(0!==n.end_date.getHours()||0!==n.end_date.getMinutes()))&&(r=scheduler.date.add(r,1,"day"))}else s=null,r=null;d[o[0]].disabled=_.checked,d[o[0]+d.length/2].disabled=_.checked,l(d,0,s||n.start_date),l(d,4,r||n.end_date)}}if(a.auto_end_date&&a.event_duration)for(var c=function(){s=new Date(d[o[3]].value,d[o[2]].value,d[o[1]].value,0,d[o[0]].value),r=new Date(s.getTime()+60*scheduler.config.event_duration*1e3),l(d,4,r)},u=0;4>u;u++)d[u].onchange=c;l(d,0,n.start_date),l(d,4,n.end_date)},get_value:function(e,t,n){var i=e.getElementsByTagName("select"),l=n._time_format_order;if(t.start_date=new Date(i[l[3]].value,i[l[2]].value,i[l[1]].value,0,i[l[0]].value),t.end_date=new Date(i[l[3]+4].value,i[l[2]+4].value,i[l[1]+4].value,0,i[l[0]+4].value),!i[l[3]].value||!i[l[3]+4].value){var s=scheduler.getEvent(scheduler._lightbox_id);s&&(t.start_date=s.start_date,t.end_date=s.end_date)}return t.end_date<=t.start_date&&(t.end_date=scheduler.date.add(t.start_date,scheduler.config.time_step,"minute")),{start_date:new Date(t.start_date),end_date:new Date(t.end_date)}},focus:function(e){scheduler._focus(e.getElementsByTagName("select")[0])}}},scheduler.showCover=function(e){if(e){e.style.display="block";var t=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,n=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,i=window.innerHeight||document.documentElement.clientHeight;e.style.top=t?Math.round(t+Math.max((i-e.offsetHeight)/2,0))+"px":Math.round(Math.max((i-e.offsetHeight)/2,0)+9)+"px",e.style.left=document.documentElement.scrollWidth>document.body.offsetWidth?Math.round(n+(document.body.offsetWidth-e.offsetWidth)/2)+"px":Math.round((document.body.offsetWidth-e.offsetWidth)/2)+"px"}this.show_cover()},scheduler.showLightbox=function(e){if(e){if(!this.callEvent("onBeforeLightbox",[e]))return void(this._new_event&&(this._new_event=null));var t=this.getLightbox();this.showCover(t),this._fill_lightbox(e,t),this._waiAria.lightboxVisibleAttr(t),this.callEvent("onLightbox",[e])}},scheduler._fill_lightbox=function(e,t){var n=this.getEvent(e),i=t.getElementsByTagName("span"),l=[];if(scheduler.templates.lightbox_header){l.push("");var s=scheduler.templates.lightbox_header(n.start_date,n.end_date,n);l.push(s),i[1].innerHTML="",i[2].innerHTML=s}else{var r=this.templates.event_header(n.start_date,n.end_date,n),a=(this.templates.event_bar_text(n.start_date,n.end_date,n)||"").substr(0,70);l.push(r),l.push(a),i[1].innerHTML=r,i[2].innerHTML=a}this._waiAria.lightboxHeader(t,l.join(" "));for(var d=this.config.lightbox.sections,o=0;o<d.length;o++){var h=d[o],_=scheduler._get_lightbox_section_node(h),c=this.form_blocks[h.type];c.set_value.call(this,_,void 0!==n[h.map_to]?n[h.map_to]:h.default_value,n,h),d[o].focus&&c.focus.call(this,_)}scheduler._lightbox_id=e},scheduler._get_lightbox_section_node=function(e){return document.getElementById(e.id).nextSibling},scheduler._lightbox_out=function(e){for(var t=this.config.lightbox.sections,n=0;n<t.length;n++){var i=document.getElementById(t[n].id),l=this.form_blocks[t[n].type].get_value.call(this,i=i?i.nextSibling:i,e,t[n]);"auto"!=t[n].map_to&&(e[t[n].map_to]=l)}return e},scheduler._empty_lightbox=function(e){var t=scheduler._lightbox_id,n=this.getEvent(t);this.getLightbox(),this._lame_copy(n,e),this.setEvent(n.id,n),this._edit_stop_event(n,!0),this.render_view_data()},scheduler.hide_lightbox=function(e){scheduler.endLightbox(!1,this.getLightbox())},scheduler.hideCover=function(e){e&&(e.style.display="none"),this.hide_cover()},scheduler.hide_cover=function(){this._cover&&this._cover.parentNode.removeChild(this._cover),this._cover=null},scheduler.show_cover=function(){if(!this._cover){this._cover=document.createElement("div"),this._cover.className="dhx_cal_cover";var e=void 0!==document.height?document.height:document.body.offsetHeight,t=document.documentElement?document.documentElement.scrollHeight:0;this._cover.style.height=Math.max(e,t)+"px",document.body.appendChild(this._cover)}},scheduler.save_lightbox=function(){var e=this._lightbox_out({},this._lame_copy(this.getEvent(this._lightbox_id)));(!this.checkEvent("onEventSave")||this.callEvent("onEventSave",[this._lightbox_id,e,this._new_event]))&&(this._empty_lightbox(e),this.hide_lightbox())},scheduler.startLightbox=function(e,t){this._lightbox_id=e,this._custom_lightbox=!0,this._temp_lightbox=this._lightbox,this._lightbox=t,this.showCover(t)},scheduler.endLightbox=function(e,t){t=t||scheduler.getLightbox();var n=scheduler.getEvent(this._lightbox_id);n&&this._edit_stop_event(n,e),e&&scheduler.render_view_data(),this.hideCover(t),this._custom_lightbox&&(this._lightbox=this._temp_lightbox,this._custom_lightbox=!1),this._temp_lightbox=this._lightbox_id=null,this._waiAria.lightboxHiddenAttr(t),this.callEvent("onAfterLightbox",[])},scheduler.resetLightbox=function(){scheduler._lightbox&&!scheduler._custom_lightbox&&scheduler._lightbox.parentNode.removeChild(scheduler._lightbox),scheduler._lightbox=null},scheduler.cancel_lightbox=function(){this.callEvent("onEventCancel",[this._lightbox_id,this._new_event]),this.hide_lightbox()},scheduler._init_lightbox_events=function(){this.getLightbox().onclick=function(e){var t=e?e.target:event.srcElement;if(t.className||(t=t.previousSibling),!(t&&t.className&&scheduler._getClassName(t).indexOf("dhx_btn_set")>-1)||(t=t.querySelector("[dhx_button]"))){var n=scheduler._getClassName(t);if(t&&n)switch(n){case"dhx_save_btn":scheduler.save_lightbox();break;case"dhx_delete_btn":var i=scheduler.locale.labels.confirm_deleting;scheduler._dhtmlx_confirm(i,scheduler.locale.labels.title_confirm_deleting,function(){scheduler.deleteEvent(scheduler._lightbox_id),scheduler._new_event=null,scheduler.hide_lightbox()});break;case"dhx_cancel_btn":scheduler.cancel_lightbox();break;default:var l,s;t.getAttribute("dhx_button")?scheduler.callEvent("onLightboxButton",[n,t,e]):(-1!=n.indexOf("dhx_custom_button")&&(-1!=n.indexOf("dhx_custom_button_")?(l=t.parentNode.getAttribute("index"),s=t.parentNode.parentNode):(l=t.getAttribute("index"),s=t.parentNode,t=t.firstChild)),l&&scheduler.form_blocks[scheduler.config.lightbox.sections[l].type].button_click(l,t,s,s.nextSibling))}}},this.getLightbox().onkeydown=function(e){var t=e||window.event,n=e.target||e.srcElement,i=n.querySelector("[dhx_button]");switch(i||(i=n.parentNode.querySelector(".dhx_custom_button, .dhx_readonly")),(e||t).keyCode){case 32:if((e||t).shiftKey)return;i&&i.click&&i.click();break;case scheduler.keys.edit_save:if((e||t).shiftKey)return;i&&i.click?i.click():scheduler.save_lightbox();break;case scheduler.keys.edit_cancel:scheduler.cancel_lightbox()}}},scheduler.setLightboxSize=function(){var e=this._lightbox;if(e){var t=e.childNodes[1];t.style.height="0px",t.style.height=t.scrollHeight+"px",e.style.height=t.scrollHeight+scheduler.xy.lightbox_additional_height+"px",t.style.height=t.scrollHeight+"px"}},scheduler._init_dnd_events=function(){dhtmlxEvent(document.body,"mousemove",scheduler._move_while_dnd),dhtmlxEvent(document.body,"mouseup",scheduler._finish_dnd),scheduler._init_dnd_events=function(){}},scheduler._move_while_dnd=function(e){if(scheduler._dnd_start_lb){document.dhx_unselectable||(document.body.className+=" dhx_unselectable",document.dhx_unselectable=!0);var t=scheduler.getLightbox(),n=e&&e.target?[e.pageX,e.pageY]:[event.clientX,event.clientY];t.style.top=scheduler._lb_start[1]+n[1]-scheduler._dnd_start_lb[1]+"px",t.style.left=scheduler._lb_start[0]+n[0]-scheduler._dnd_start_lb[0]+"px"}},scheduler._ready_to_dnd=function(e){var t=scheduler.getLightbox();scheduler._lb_start=[parseInt(t.style.left,10),parseInt(t.style.top,10)],scheduler._dnd_start_lb=e&&e.target?[e.pageX,e.pageY]:[event.clientX,event.clientY]},scheduler._finish_dnd=function(){scheduler._lb_start&&(scheduler._lb_start=scheduler._dnd_start_lb=!1,document.body.className=document.body.className.replace(" dhx_unselectable",""),document.dhx_unselectable=!1)},scheduler.getLightbox=function(){if(!this._lightbox){var e=document.createElement("div");e.className="dhx_cal_light",scheduler.config.wide_form&&(e.className+=" dhx_cal_light_wide"),scheduler.form_blocks.recurring&&(e.className+=" dhx_cal_light_rec"),/msie|MSIE 6/.test(navigator.userAgent)&&(e.className+=" dhx_ie6"),e.style.visibility="hidden";for(var t=this._lightbox_template,n=this.config.buttons_left,i=0;i<n.length;i++)t+="<div "+this._waiAria.lightboxButtonAttrString(n[i])+" class='dhx_btn_set dhx_left_btn_set "+n[i]+"_set'><div dhx_button='1' class='"+n[i]+"'></div><div>"+scheduler.locale.labels[n[i]]+"</div></div>";for(n=this.config.buttons_right,i=0;i<n.length;i++)t+="<div "+this._waiAria.lightboxButtonAttrString(n[i])+" class='dhx_btn_set dhx_right_btn_set "+n[i]+"_set' style='float:right;'><div dhx_button='1' class='"+n[i]+"'></div><div>"+scheduler.locale.labels[n[i]]+"</div></div>";e.innerHTML=t+="</div>",scheduler.config.drag_lightbox&&(e.firstChild.onmousedown=scheduler._ready_to_dnd,e.firstChild.onselectstart=function(){return!1},e.firstChild.style.cursor="move",scheduler._init_dnd_events()),this._waiAria.lightboxAttr(e),document.body.insertBefore(e,document.body.firstChild),this._lightbox=e;var l=this.config.lightbox.sections;for(t="",i=0;i<l.length;i++){var s=this.form_blocks[l[i].type];if(s){l[i].id="area_"+this.uid();var r="";l[i].button&&(r="<div "+scheduler._waiAria.lightboxSectionButtonAttrString(this.locale.labels["button_"+l[i].button])+" class='dhx_custom_button' index='"+i+"'><div class='dhx_custom_button_"+l[i].button+"'></div><div>"+this.locale.labels["button_"+l[i].button]+"</div></div>"),this.config.wide_form&&(t+="<div class='dhx_wrap_section'>");var a=this.locale.labels["section_"+l[i].name];"string"!=typeof a&&(a=l[i].name),t+="<div id='"+l[i].id+"' class='dhx_cal_lsection'>"+r+"<label>"+a+"</label></div>"+s.render.call(this,l[i]),t+="</div>"}}var d=e.getElementsByTagName("div");for(i=0;i<d.length;i++){var o=d[i];if("dhx_cal_larea"==scheduler._getClassName(o)){o.innerHTML=t;break}}scheduler._bindLightboxLabels(l),this.setLightboxSize(),this._init_lightbox_events(this),e.style.display="none",e.style.visibility="visible"}return this._lightbox},scheduler._bindLightboxLabels=function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.id&&document.getElementById(n.id)){for(var i=document.getElementById(n.id).querySelector("label"),l=scheduler._get_lightbox_section_node(n);l&&!l.querySelector;)l=l.nextSibling;var s=!0;if(l){var r=l.querySelector("input, select, textarea");r&&(n.inputId=r.id||"input_"+scheduler.uid(),r.id||(r.id=n.inputId),i.setAttribute("for",n.inputId),s=!1)}s&&scheduler.form_blocks[n.type].focus&&(i.onclick=function(e){return function(){var t=scheduler.form_blocks[e.type],n=scheduler._get_lightbox_section_node(e);t&&t.focus&&t.focus.call(scheduler,n)}}(n))}}},scheduler.attachEvent("onEventIdChange",function(e,t){this._lightbox_id==e&&(this._lightbox_id=t)}),scheduler._lightbox_template="<div class='dhx_cal_ltitle'><span class='dhx_mark'>&nbsp;</span><span class='dhx_time'></span><span class='dhx_title'></span></div><div class='dhx_cal_larea'></div>",scheduler._init_touch_events=function(){if(this.config.touch&&(-1!=navigator.userAgent.indexOf("Mobile")||-1!=navigator.userAgent.indexOf("iPad")||-1!=navigator.userAgent.indexOf("Android")||-1!=navigator.userAgent.indexOf("Touch"))&&(this.xy.scroll_width=0,this._mobile=!0),this.config.touch){var e=!0;try{document.createEvent("TouchEvent")}catch(t){e=!1}e?this._touch_events(["touchmove","touchstart","touchend"],function(e){return e.touches&&e.touches.length>1?null:e.touches[0]?{target:e.target,pageX:e.touches[0].pageX,pageY:e.touches[0].pageY,clientX:e.touches[0].clientX,clientY:e.touches[0].clientY}:e},function(){return!1}):window.PointerEvent||window.navigator.pointerEnabled?this._touch_events(["pointermove","pointerdown","pointerup"],function(e){return"mouse"==e.pointerType?null:e},function(e){return!e||"mouse"==e.pointerType}):window.navigator.msPointerEnabled&&this._touch_events(["MSPointerMove","MSPointerDown","MSPointerUp"],function(e){return e.pointerType==e.MSPOINTER_TYPE_MOUSE?null:e},function(e){return!e||e.pointerType==e.MSPOINTER_TYPE_MOUSE})}},scheduler._touch_events=function(e,t,n){function i(e,t,i){e.addEventListener(t,function(e){return!!scheduler._is_lightbox_open()||(n(e)?void 0:i(e))},{passive:!1})}function l(e){n(e)||(scheduler._hide_global_tip(),d&&(scheduler._on_mouse_up(t(e||event)),scheduler._temp_touch_block=!1),scheduler._drag_id=null,scheduler._drag_mode=null,scheduler._drag_pos=null,scheduler._pointerDragId=null,clearTimeout(a),d=h=!1,o=!0)}var s,r,a,d,o,h,_=(-1!=navigator.userAgent.indexOf("Android")&&navigator.userAgent.indexOf("WebKit"),0);i(document.body,e[0],function(e){if(!n(e)){var i=t(e);if(i){if(d)return function(e){if(!n(e)){var t=scheduler.getState().drag_mode,i=!!scheduler.matrix&&scheduler.matrix[scheduler._mode],l=scheduler.render_view_data;"create"==t&&i&&(scheduler.render_view_data=function(){for(var e=scheduler.getState().drag_id,t=scheduler.getEvent(e),n=i.y_property,l=scheduler.getEvents(t.start_date,t.end_date),s=0;s<l.length;s++)l[s][n]!=t[n]&&(l.splice(s,1),s--);t._sorder=l.length-1,t._count=l.length,this.render_data([t],scheduler.getState().mode)}),scheduler._on_mouse_move(e),"create"==t&&i&&(scheduler.render_view_data=l),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0}}(i),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,scheduler._update_global_tip(),!1;if(r=t(e),h)return r?void((s.target!=r.target||Math.abs(s.pageX-r.pageX)>5||Math.abs(s.pageY-r.pageY)>5)&&(o=!0,clearTimeout(a))):void(o=!0)}}}),i(this._els.dhx_cal_data[0],"scroll",l),i(this._els.dhx_cal_data[0],"touchcancel",l),i(this._els.dhx_cal_data[0],"contextmenu",function(e){return n(e)?void 0:h?(e&&e.preventDefault&&e.preventDefault(),(e||event).cancelBubble=!0,!1):void 0}),i(this._obj,e[1],function(e){if(!n(e)){var i;if(scheduler._pointerDragId=e.pointerId,d=o=!1,h=!0,!(i=r=t(e)))return void(o=!0);var l=new Date;if(!o&&!d&&250>l-_)return scheduler._click.dhx_cal_data(i),window.setTimeout(function(){i.type="dblclick",scheduler._on_dbl_click(i)},50),e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,scheduler._block_next_stop=!0,!1;if(_=l,!o&&!d&&scheduler.config.touch_drag){var c=scheduler._locate_event(document.activeElement),u=scheduler._locate_event(i.target),g=s?scheduler._locate_event(s.target):null;if(c&&u&&c==u&&c!=g)return e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,scheduler._ignore_next_click=!1,scheduler._click.dhx_cal_data(i),s=i,!1;a=setTimeout(function(){d=!0;var e=s.target,t=scheduler._getClassName(e);e&&-1!=t.indexOf("dhx_body")&&(e=e.previousSibling),scheduler._on_mouse_down(s,e),scheduler._drag_mode&&"create"!=scheduler._drag_mode&&scheduler.for_rendered(scheduler._drag_id,function(e,t){e.style.display="none",scheduler._rendered.splice(t,1)}),scheduler.config.touch_tip&&scheduler._show_global_tip(),scheduler.updateEvent(scheduler._drag_id)},scheduler.config.touch_drag),s=i}}}),i(this._els.dhx_cal_data[0],e[2],function(e){return n(e)?void 0:(!d&&function(e,t,n,i){if(!e||!t)return!1;for(var l=e.target;l&&l!=scheduler._obj;)l=l.parentNode;if(l!=scheduler._obj)return!1;var s=Math.abs(e.pageY-t.pageY),r=Math.abs(e.pageX-t.pageX);return 100>s&&r>200&&(!s||r/s>3)&&(e.pageX>t.pageX?scheduler._click.dhx_cal_next_button():scheduler._click.dhx_cal_prev_button(),!0)}(s,r)&&(scheduler._block_next_stop=!0),d&&(scheduler._ignore_next_click=!0,setTimeout(function(){scheduler._ignore_next_click=!1},100)),l(e),scheduler._block_next_stop?(scheduler._block_next_stop=!1,e.preventDefault&&e.preventDefault(),e.cancelBubble=!0,!1):void 0)}),dhtmlxEvent(document.body,e[2],l)},scheduler._show_global_tip=function(){scheduler._hide_global_tip();var e=scheduler._global_tip=document.createElement("div");e.className="dhx_global_tip",scheduler._update_global_tip(1),document.body.appendChild(e)},scheduler._update_global_tip=function(e){var t=scheduler._global_tip;if(t){var n="";if(scheduler._drag_id&&!e){var i=scheduler.getEvent(scheduler._drag_id);i&&(n="<div>"+(i._timed?scheduler.templates.event_header(i.start_date,i.end_date,i):scheduler.templates.day_date(i.start_date,i.end_date,i))+"</div>")}t.innerHTML="create"==scheduler._drag_mode||"new-size"==scheduler._drag_mode?(scheduler.locale.labels.drag_to_create||"Drag to create")+n:(scheduler.locale.labels.drag_to_move||"Drag to move")+n}},scheduler._hide_global_tip=function(){var e=scheduler._global_tip;e&&e.parentNode&&(e.parentNode.removeChild(e),scheduler._global_tip=0)},scheduler._dp_init=function(e){e._methods=["_set_event_text_style","","_dp_change_event_id","_dp_hook_delete"],this._dp_change_event_id=function(e,t){scheduler.getEvent(e)&&scheduler.changeEventId(e,t)},this._dp_hook_delete=function(t,n){return scheduler.getEvent(t)?(t!=n&&("true_deleted"==this.getUserData(t,e.action_param)&&this.setUserData(t,e.action_param,"updated"),this.changeEventId(t,n)),this.deleteEvent(n,!0)):void 0},this.attachEvent("onEventAdded",function(t){!this._loading&&this._validId(t)&&e.setUpdated(t,!0,"inserted")}),this.attachEvent("onConfirmedBeforeEventDelete",function(t){if(this._validId(t)){var n=e.getState(t);return"inserted"==n||this._new_event?(e.setUpdated(t,!1),!0):"deleted"!=n&&("true_deleted"==n||(e.setUpdated(t,!0,"deleted"),!1))}}),this.attachEvent("onEventChanged",function(t){!this._loading&&this._validId(t)&&e.setUpdated(t,!0,"updated")}),scheduler.attachEvent("onClearAll",function(){e._in_progress={},e._invalid={},e.updatedRows=[],e._waitMode=0}),e._objToJson=function(t,n,i){for(var l in i=i||"",n=n||{},t)0!==l.indexOf("_")&&(t[l]&&t[l].getUTCFullYear?n[i+l]=this.obj.templates.xml_format(t[l]):t[l]&&"object"==typeof t[l]?e._objToJson(t[l],n,i+l+"."):n[i+l]=t[l]);return n},e._getRowData=function(e,t){var n=this.obj.getEvent(e);return this._objToJson(n)},e._clearUpdateFlag=function(){},e.attachEvent("insertCallback",scheduler._update_callback),e.attachEvent("updateCallback",scheduler._update_callback),e.attachEvent("deleteCallback",function(e,t){this.obj.getEvent(t)?(this.obj.setUserData(t,this.action_param,"true_deleted"),this.obj.deleteEvent(t)):this.obj._add_rec_marker&&this.obj._update_callback(e,t)})},scheduler._validId=function(e){return!0},scheduler.setUserData=function(e,t,n){if(e){var i=this.getEvent(e);i&&(i[t]=n)}else this._userdata[t]=n},scheduler.getUserData=function(e,t){if(e){var n=this.getEvent(e);return n?n[t]:null}return this._userdata[t]},scheduler._set_event_text_style=function(e,t){if(scheduler.getEvent(e)){this.for_rendered(e,function(e){e.style.cssText+=";"+t});var n=this.getEvent(e);n._text_style=t,this.event_updated(n)}},scheduler._update_callback=function(e,t){var n=scheduler._xmlNodeToJSON(e.firstChild);"none"==n.rec_type&&(n.rec_pattern="none"),n.text=n.text||n._tagvalue,n.start_date=scheduler.templates.xml_date(n.start_date),n.end_date=scheduler.templates.xml_date(n.end_date),scheduler.addEvent(n),scheduler._add_rec_marker&&scheduler.setCurrentView()},scheduler._skin_settings={fix_tab_position:[1,0],use_select_menu_space:[1,0],wide_form:[1,0],hour_size_px:[44,42],displayed_event_color:["#ff4a4a","ffc5ab"],displayed_event_text_color:["#ffef80","7e2727"]},scheduler._skin_xy={lightbox_additional_height:[90,50],nav_height:[59,22],bar_height:[24,20]},scheduler._is_material_skin=function(){return(scheduler.skin+"").indexOf("material")>-1},scheduler._border_box_bvents=function(){return scheduler._is_material_skin()},scheduler._configure=function(e,t,n){for(var i in t)void 0===e[i]&&(e[i]=t[i][n])},scheduler._skin_init=function(){if(!scheduler.skin)for(var e=document.getElementsByTagName("link"),t=0;t<e.length;t++){var n=e[t].href.match("dhtmlxscheduler_([a-z]+).css");if(n){scheduler.skin=n[1];break}}var i=0;if(!scheduler.skin||"classic"!==scheduler.skin&&"glossy"!==scheduler.skin||(i=1),scheduler._is_material_skin()){var l=scheduler.config.buttons_left.$inital,s=scheduler.config.buttons_right.$inital;if(l&&scheduler.config.buttons_left.slice().join()==l&&s&&scheduler.config.buttons_right.slice().join()==s){var r=scheduler.config.buttons_left.slice();scheduler.config.buttons_left=scheduler.config.buttons_right.slice(),scheduler.config.buttons_right=r}scheduler.xy.event_header_height=18,scheduler.xy.menu_width=25,scheduler.xy.week_agenda_scale_height=35,scheduler.xy.map_icon_width=38,scheduler._lightbox_controls.defaults.textarea.height=64,scheduler._lightbox_controls.defaults.time.height="auto"}if(this._configure(scheduler.config,scheduler._skin_settings,i),this._configure(scheduler.xy,scheduler._skin_xy,i),"flat"===scheduler.skin&&(scheduler.xy.scale_height=35,scheduler.templates.hour_scale=function(e){var t=e.getMinutes();return t=10>t?"0"+t:t,"<span class='dhx_scale_h'>"+e.getHours()+"</span><span class='dhx_scale_m'>&nbsp;"+t+"</span>"}),!i){var a=scheduler.config.minicalendar;a&&(a.padding=14),scheduler.templates.event_bar_date=function(e,t,n){return"\u2022 <b>"+scheduler.templates.event_date(e)+"</b> "},scheduler.attachEvent("onTemplatesReady",function(){var e=scheduler.date.date_to_str("%d");scheduler.templates._old_month_day||(scheduler.templates._old_month_day=scheduler.templates.month_day);var t=scheduler.templates._old_month_day;if(scheduler.templates.month_day=function(n){if("month"==this._mode){var i=e(n);return 1==n.getDate()&&(i=scheduler.locale.date.month_full[n.getMonth()]+" "+i),+n==+scheduler.date.date_part(this._currentDate())&&(i=scheduler.locale.labels.dhx_cal_today_button+" "+i),i}return t.call(this,n)},scheduler.config.fix_tab_position){var n=scheduler._els.dhx_cal_navline[0].getElementsByTagName("div"),i=null,l=211,s=[14,75,136],r=14;scheduler._is_material_skin()&&(s=[16,103,192],l=294,r=-1);for(var a=0;a<n.length;a++){var d=n[a],o=d.getAttribute("name");if(o){switch(d.style.right="auto",o){case"day_tab":d.style.left=s[0]+"px",d.className+=" dhx_cal_tab_first";break;case"week_tab":d.style.left=s[1]+"px";break;case"month_tab":d.style.left=s[2]+"px",d.className+=" dhx_cal_tab_last";break;default:d.style.left=l+"px",d.className+=" dhx_cal_tab_standalone",l=l+r+d.offsetWidth}d.className+=" "+o}else 0===(d.className||"").indexOf("dhx_minical_icon")&&d.parentNode==scheduler._els.dhx_cal_navline[0]&&(i=d)}i&&(i.style.left=l+"px")}}),scheduler._skin_init=function(){}}},window.jQuery&&(e=jQuery,t=[],e.fn.dhx_scheduler=function(n){if("string"!=typeof n){var i=[];return this.each(function(){if(this&&this.getAttribute&&!this.getAttribute("dhxscheduler")){for(var e in n)"data"!=e&&(scheduler.config[e]=n[e]);this.getElementsByTagName("div").length||(this.innerHTML='<div class="dhx_cal_navline"><div class="dhx_cal_prev_button">&nbsp;</div><div class="dhx_cal_next_button">&nbsp;</div><div class="dhx_cal_today_button"></div><div class="dhx_cal_date"></div><div class="dhx_cal_tab" name="day_tab" style="right:204px;"></div><div class="dhx_cal_tab" name="week_tab" style="right:140px;"></div><div class="dhx_cal_tab" name="month_tab" style="right:76px;"></div></div><div class="dhx_cal_header"></div><div class="dhx_cal_data"></div>',this.className+=" dhx_cal_container"),scheduler.init(this,scheduler.config.date,scheduler.config.mode),n.data&&scheduler.parse(n.data),i.push(scheduler)}}),1===i.length?i[0]:i}return t[n]?t[n].apply(this,[]):void e.error("Method "+n+" does not exist on jQuery.dhx_scheduler")}),function(){function e(e,t,n){t&&(e._date=t),n&&(e._mode=n)}var t=scheduler.setCurrentView,n=scheduler.updateView,i=null,l=null,s=function(t,s){var r=this;window.clearTimeout(l),window.clearTimeout(i);var a=r._date,d=r._mode;e(this,t,s),l=setTimeout(function(){return r.callEvent("onBeforeViewChange",[d,a,s||r._mode,t||r._date])?(n.call(r,t,s),r.callEvent("onViewChange",[r._mode,r._date]),window.clearTimeout(i),void(l=0)):void e(r,a,d)},scheduler.config.delay_render)},r=function(t,s){var r=this,a=arguments;e(this,t,s),window.clearTimeout(i),i=setTimeout(function(){l||n.apply(r,a)},scheduler.config.delay_render)};scheduler.attachEvent("onSchedulerReady",function(){scheduler.config.delay_render?(scheduler.setCurrentView=s,scheduler.updateView=r):(scheduler.setCurrentView=t,scheduler.updateView=n)})}()},UE8e:function(e,t,n){"use strict";n.r(t);var i=n("CcnG"),l=function(){},s=n("4lDY"),r=n("pMnS"),a=n("Ip0R"),d=(n("T7+c"),n("XzHB"),function(){function e(e){this.appointmentService=e,this.appointmentList=[]}return e.prototype.ngOnInit=function(){this.currentDate(),scheduler.config.xml_date="%Y-%m-%d %H:%i",scheduler.init(this.schedulerContainer.nativeElement,new Date(this.yyyy,this.mm,this.dd)),this.getSchedule()},e.prototype.currentDate=function(){var e=new Date;this.dd=e.getDate(),this.mm=e.getMonth(),this.yyyy=e.getFullYear()},e.prototype.getSchedule=function(){var e=this;this.appointmentService.getAppointment().subscribe(function(t){e.appointmentList=[],t.forEach(function(t){e.appointmentList.push({id:t.AppointmentId,start_date:t.StartDate+" "+t.FromTime,end_date:t.StartDate+" "+t.ToTime,text:t.Description})}),scheduler.parse(e.appointmentList,"json")})},e}()),o=n("KqrR"),h=i["\u0275crt"]({encapsulation:2,styles:[[":host{display:block;height:100%;position:relative;width:100%}.dhx_cal_container{background-color:#222;color:#bdc3c7;border:1px solid gray}.dhx_cal_header,.dhx_scale_bar{background-color:#222}.dhx_scale_holder{position:absolute;border-right:1px solid #cecece;background-image:none;-ms-interpolation-mode:nearest-neighbor;image-rendering:-moz-crisp-edges;image-rendering:crisp-edges;image-rendering:pixelated}"]],data:{}});function _(e){return i["\u0275vid"](0,[i["\u0275qud"](402653184,1,{schedulerContainer:0}),(e()(),i["\u0275eld"](1,0,[[1,0],["scheduler_here",1]],null,12,"div",[["class","dhx_cal_container"],["style","width: 100%; height:40vh"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,9,"div",[["class","dhx_cal_navline"]],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,1,"div",[["class","dhx_cal_prev_button"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0"])),(e()(),i["\u0275eld"](5,0,null,null,1,"div",[["class","dhx_cal_next_button"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["\xa0"])),(e()(),i["\u0275eld"](7,0,null,null,0,"div",[["class","dhx_cal_today_button"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,0,"div",[["class","dhx_cal_date"]],null,null,null,null,null)),(e()(),i["\u0275eld"](9,0,null,null,0,"div",[["class","dhx_cal_tab"],["name","day_tab"]],null,null,null,null,null)),(e()(),i["\u0275eld"](10,0,null,null,0,"div",[["class","dhx_cal_tab"],["name","week_tab"]],null,null,null,null,null)),(e()(),i["\u0275eld"](11,0,null,null,0,"div",[["class","dhx_cal_tab"],["name","month_tab"]],null,null,null,null,null)),(e()(),i["\u0275eld"](12,0,null,null,0,"div",[["class","dhx_cal_header"]],null,null,null,null,null)),(e()(),i["\u0275eld"](13,0,null,null,0,"div",[["class","dhx_cal_data"]],null,null,null,null,null))],null,null)}n("M0ag");var c=function(){function e(e){this.selectService=e,this.alerts=[],this.sliders=[]}return e.prototype.ngOnInit=function(){this.counts$=this.selectService.getCounts()},e.prototype.closeAlert=function(e){var t=this.alerts.indexOf(e);this.alerts.splice(t,1)},e}(),u=n("PVyA"),g=i["\u0275crt"]({encapsulation:0,styles:[[".deskContent[_ngcontent-%COMP%]{width:100%;height:400px;background-repeat:no-repeat;background-size:contain}.bg-dark-shine[_ngcontent-%COMP%]{background:linear-gradient(to top,#000,#434343)}@media all and (min-width:959px){.deskContent[_ngcontent-%COMP%]{display:block}.phoneContent[_ngcontent-%COMP%]{display:none}}.fa[_ngcontent-%COMP%]{color:#bdc3c7;font-size:33px}.fa-arrow-circle-right[_ngcontent-%COMP%]{font-size:16px}.card[_ngcontent-%COMP%]{color:#bdc3c7;width:300px;height:150px}.success[_ngcontent-%COMP%]{border:1px solid #2ecc71}.primary[_ngcontent-%COMP%]{border:1px solid #29b6f6}.warning[_ngcontent-%COMP%]{border:1px solid #f39c12}.danger[_ngcontent-%COMP%]{border:1px solid #e74c3c}"]],data:{animation:[{type:7,name:"routerTransition",definitions:[{type:0,name:"void",styles:{type:6,styles:{},offset:null},options:void 0},{type:0,name:"*",styles:{type:6,styles:{},offset:null},options:void 0},{type:1,expr:":enter",animation:[{type:6,styles:{transform:"translateY(100%)"},offset:null},{type:4,styles:{type:6,styles:{transform:"translateY(0%)"},offset:null},timings:"0.5s ease-in-out"}],options:null},{type:1,expr:":leave",animation:[{type:6,styles:{transform:"translateY(0%)"},offset:null},{type:4,styles:{type:6,styles:{transform:"translateY(-100%)"},offset:null},timings:"0.5s ease-in-out"}],options:null}],options:{}}]}});function f(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,68,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,16,"div",[["class","col-xl-3 col-lg-6 pt-3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](2,0,null,null,15,"div",[["class","card text-white success bg-dark-shine"]],null,null,null,null,null)),(e()(),i["\u0275eld"](3,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275eld"](4,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](5,0,null,null,1,"div",[["class","col col-xs-3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](6,0,null,null,0,"i",[["class","fa fa-users fa-5x"]],null,null,null,null,null)),(e()(),i["\u0275eld"](7,0,null,null,4,"div",[["class","col col-xs-9 text-right"]],null,null,null,null,null)),(e()(),i["\u0275eld"](8,0,null,null,1,"div",[["class","d-block huge"]],null,null,null,null,null)),(e()(),i["\u0275ted"](9,null,["",""])),(e()(),i["\u0275eld"](10,0,null,null,1,"div",[["class","d-block"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Active Patients"])),(e()(),i["\u0275eld"](12,0,null,null,5,"div",[["class","card-footer"]],null,null,null,null,null)),(e()(),i["\u0275eld"](13,0,null,null,1,"span",[["class","float-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["View Details"])),(e()(),i["\u0275eld"](15,0,null,null,2,"a",[["class","float-right card-inverse"],["href","javascript:void(0)"]],null,null,null,null,null)),(e()(),i["\u0275eld"](16,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275eld"](17,0,null,null,0,"i",[["class","fa fa-arrow-circle-right"]],null,null,null,null,null)),(e()(),i["\u0275eld"](18,0,null,null,16,"div",[["class","col-xl-3 col-lg-6 pt-3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](19,0,null,null,15,"div",[["class","card text-white primary bg-dark-shine"]],null,null,null,null,null)),(e()(),i["\u0275eld"](20,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275eld"](21,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](22,0,null,null,1,"div",[["class","col col-xs-3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](23,0,null,null,0,"i",[["class","fa fa-calendar fa-5x"]],null,null,null,null,null)),(e()(),i["\u0275eld"](24,0,null,null,4,"div",[["class","col col-xs-9 text-right"]],null,null,null,null,null)),(e()(),i["\u0275eld"](25,0,null,null,1,"div",[["class","d-block huge"]],null,null,null,null,null)),(e()(),i["\u0275ted"](26,null,["",""])),(e()(),i["\u0275eld"](27,0,null,null,1,"div",[["class","d-block"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["New Appointments"])),(e()(),i["\u0275eld"](29,0,null,null,5,"div",[["class","card-footer"]],null,null,null,null,null)),(e()(),i["\u0275eld"](30,0,null,null,1,"span",[["class","float-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["View Details"])),(e()(),i["\u0275eld"](32,0,null,null,2,"a",[["class","float-right card-inverse"],["href","javascript:void(0)"]],null,null,null,null,null)),(e()(),i["\u0275eld"](33,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275eld"](34,0,null,null,0,"i",[["class","fa fa-arrow-circle-right"]],null,null,null,null,null)),(e()(),i["\u0275eld"](35,0,null,null,16,"div",[["class","col-xl-3 col-lg-6 pt-3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](36,0,null,null,15,"div",[["class","card text-white warning bg-dark-shine"]],null,null,null,null,null)),(e()(),i["\u0275eld"](37,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275eld"](38,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](39,0,null,null,1,"div",[["class","col col-xs-3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](40,0,null,null,0,"i",[["class","fa fa-user-md fa-5x"]],null,null,null,null,null)),(e()(),i["\u0275eld"](41,0,null,null,4,"div",[["class","col col-xs-9 text-right"]],null,null,null,null,null)),(e()(),i["\u0275eld"](42,0,null,null,1,"div",[["class","d-block huge"]],null,null,null,null,null)),(e()(),i["\u0275ted"](43,null,["",""])),(e()(),i["\u0275eld"](44,0,null,null,1,"div",[["class","d-block"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Awaiting Confirmation"])),(e()(),i["\u0275eld"](46,0,null,null,5,"div",[["class","card-footer"]],null,null,null,null,null)),(e()(),i["\u0275eld"](47,0,null,null,1,"span",[["class","float-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["View Details"])),(e()(),i["\u0275eld"](49,0,null,null,2,"a",[["class","float-right card-inverse"],["href","javascript:void(0)"]],null,null,null,null,null)),(e()(),i["\u0275eld"](50,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275eld"](51,0,null,null,0,"i",[["class","fa fa-arrow-circle-right"]],null,null,null,null,null)),(e()(),i["\u0275eld"](52,0,null,null,16,"div",[["class","col-xl-3 col-lg-6 pt-3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](53,0,null,null,15,"div",[["class","card text-white danger bg-dark-shine"]],null,null,null,null,null)),(e()(),i["\u0275eld"](54,0,null,null,8,"div",[["class","card-header"]],null,null,null,null,null)),(e()(),i["\u0275eld"](55,0,null,null,7,"div",[["class","row"]],null,null,null,null,null)),(e()(),i["\u0275eld"](56,0,null,null,1,"div",[["class","col col-xs-3"]],null,null,null,null,null)),(e()(),i["\u0275eld"](57,0,null,null,0,"i",[["class","fa fa-upload fa-5x"]],null,null,null,null,null)),(e()(),i["\u0275eld"](58,0,null,null,4,"div",[["class","col col-xs-9 text-right"]],null,null,null,null,null)),(e()(),i["\u0275eld"](59,0,null,null,1,"div",[["class","d-block huge"]],null,null,null,null,null)),(e()(),i["\u0275ted"](60,null,["",""])),(e()(),i["\u0275eld"](61,0,null,null,1,"div",[["class","d-block"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Archived Appointments"])),(e()(),i["\u0275eld"](63,0,null,null,5,"div",[["class","card-footer"]],null,null,null,null,null)),(e()(),i["\u0275eld"](64,0,null,null,1,"span",[["class","float-left"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["View Details"])),(e()(),i["\u0275eld"](66,0,null,null,2,"a",[["class","float-right card-inverse"],["href","javascript:void(0)"]],null,null,null,null,null)),(e()(),i["\u0275eld"](67,0,null,null,1,"span",[],null,null,null,null,null)),(e()(),i["\u0275eld"](68,0,null,null,0,"i",[["class","fa fa-arrow-circle-right "]],null,null,null,null,null))],null,function(e,t){e(t,9,0,t.context.ngIf[0].value),e(t,26,0,t.context.ngIf[1].value),e(t,43,0,t.context.ngIf[2].value),e(t,60,0,t.context.ngIf[3].value)})}function v(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,12,"div",[],[[24,"@routerTransition",0]],null,null,null,null)),(e()(),i["\u0275eld"](1,0,null,null,3,"h2",[["class","text-muted"]],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Dashboard "])),(e()(),i["\u0275eld"](3,0,null,null,1,"small",[],null,null,null,null,null)),(e()(),i["\u0275ted"](-1,null,["Statistics Overview"])),(e()(),i["\u0275eld"](5,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),i["\u0275and"](16777216,null,null,2,null,f)),i["\u0275did"](7,16384,null,0,a.NgIf,[i.ViewContainerRef,i.TemplateRef],{ngIf:[0,"ngIf"]},null),i["\u0275pid"](131072,a.AsyncPipe,[i.ChangeDetectorRef]),(e()(),i["\u0275eld"](9,0,null,null,0,"hr",[],null,null,null,null,null)),(e()(),i["\u0275eld"](10,0,null,null,2,"div",[["class","card-body table-responsive"]],null,null,null,null,null)),(e()(),i["\u0275eld"](11,0,null,null,1,"app-calendar-scheduler",[],null,null,null,_,h)),i["\u0275did"](12,114688,null,0,d,[o.a],null,null)],function(e,t){var n=t.component;e(t,7,0,i["\u0275unv"](t,7,0,i["\u0275nov"](t,8).transform(n.counts$))),e(t,12,0)},function(e,t){e(t,0,0,void 0)})}var m=i["\u0275ccf"]("app-dashboard",c,function(e){return i["\u0275vid"](0,[(e()(),i["\u0275eld"](0,0,null,null,1,"app-dashboard",[],null,null,null,v,g)),i["\u0275did"](1,114688,null,0,c,[u.a],null,null)],function(e,t){e(t,1,0)},null)},{},{},[]),p=n("q7oS"),x=n("e5OV"),b=n("PsaP"),y=n("bt6x"),w=n("ZYCi"),D=function(){},E=n("MviD");n.d(t,"DashboardModuleNgFactory",function(){return A});var A=i["\u0275cmf"](l,[],function(e){return i["\u0275mod"]([i["\u0275mpd"](512,i.ComponentFactoryResolver,i["\u0275CodegenComponentFactoryResolver"],[[8,[s.a,r.a,m]],[3,i.ComponentFactoryResolver],i.NgModuleRef]),i["\u0275mpd"](4608,a.NgLocalization,a.NgLocaleLocalization,[i.LOCALE_ID,[2,a["\u0275angular_packages_common_common_a"]]]),i["\u0275mpd"](4608,p.a,p.a,[]),i["\u0275mpd"](4608,x.a,x.a,[]),i["\u0275mpd"](1073742336,a.CommonModule,a.CommonModule,[]),i["\u0275mpd"](1073742336,b.a,b.a,[]),i["\u0275mpd"](1073742336,y.a,y.a,[]),i["\u0275mpd"](1073742336,w.o,w.o,[[2,w.u],[2,w.l]]),i["\u0275mpd"](1073742336,D,D,[]),i["\u0275mpd"](1073742336,E.a,E.a,[]),i["\u0275mpd"](1073742336,l,l,[]),i["\u0275mpd"](1024,w.j,function(){return[[{path:"",component:c}]]},[])])})}}]);